<?xml version="1.0" encoding="utf-8" ?>
<Queries>

  <Paginacao>
    <querySelecionarCount>
      SELECT COUNT(1) FROM ( @MINHAQUERY@ ) C
    </querySelecionarCount>
    <querySelecionarPaginado>
      SELECT * FROM
      (
      SELECT
      row_number() OVER(ORDER BY @ORDER_BY_EXTERNO) AS number, * FROM
      (
      @MINHAQUERY@
      ) N
      ) S
      WHERE
      (number BETWEEN @REGISTRO_INICIAL + 1 AND @REGISTRO_INICIAL + @QTD_A_RETORNAR)
      ORDER BY @ORDER_BY_EXTERNO
    </querySelecionarPaginado>
  </Paginacao>

  <UsuarioLogado>
    <validaUsuarioSenha>
      SELECT
        U.id_Usuario,
        U.id_Facebook,
        U.nm_Usuario,
        PA.id_Perfil_Acesso,
        PA.nm_Perfil_Acesso,
        PA.moderador
      FROM
        DCCCOLAB..Usuario U
        INNER JOIN DCCCOLAB..Perfil_Acesso PA ON PA.id_Perfil_Acesso = U.id_Perfil_Acesso
      WHERE
        U.nm_Usuario = @LOGIN AND
        PWDCOMPARE(@SENHA, U.senha) = 1
    </validaUsuarioSenha>
    <selecionarDadosUsuario>
      SELECT
      P.id_Participante,
      P.nm_Participante,
      P.ds_Email
      FROM
      [SIGEF].[dbo].Participante P
      WHERE
      (P.id_Participante = @ID_PARTICIPANTE)
    </selecionarDadosUsuario>
  </UsuarioLogado>

  <Auditoria>
    <selecionarAuditoriaPorCodigo>
      SELECT
      A.id_auditoria,
      A.id_entidade,
      A.nome_entidade,
      A.data_modificacao,
      A.id_tipo,
      A.id_operacao,
      A.usuario_alteracao,
      A.nu_ano_mes,
      AM.campo_modificado,
      AM.modificacao
      FROM
      COLAB..auditoria A
      LEFT JOIN COLAB..auditoria_modificacao AM ON A.id_auditoria = AM.id_auditoria
      WHERE
      (A.id_auditoria = @ID)
    </selecionarAuditoriaPorCodigo>
    <selecionarAuditoriasFiltradas>
      SELECT
      A.id_auditoria,
      A.id_entidade,
      A.nome_entidade,
      A.data_modificacao,
      A.id_tipo,
      A.id_operacao,
      A.usuario_alteracao,
      A.nu_ano_mes,
      AM.campo_modificado,
      AM.modificacao
      FROM
      COLAB..auditoria A
      LEFT JOIN COLAB..auditoria_modificacao AM ON A.id_auditoria = AM.id_auditoria
      WHERE
      (id_entidade IN
      (
      SELECT
      A2.id_entidade
      FROM
      COLAB..auditoria A2
      WHERE
      (@USUARIO IS NULL OR A2.usuario_alteracao COLLATE Latin1_General_CI_AI LIKE '%'+@USUARIO+'%') AND
      (@NOME_OBJ IS NULL OR A2.nome_entidade COLLATE Latin1_General_CI_AI LIKE '%'+@NOME_OBJ+'%') AND
      (@OPERACAO = 0 OR A2.id_operacao = @OPERACAO) AND
      (@TIPO = 0 OR A2.id_tipo = @TIPO) AND
      (@DATA_LIMITE_INF IS NULL OR @DATA_LIMITE_SUP IS NULL OR CONVERT(VARCHAR(20), A2.data_modificacao, 112) BETWEEN CONVERT(VARCHAR(20), @DATA_LIMITE_INF, 112) AND CONVERT(VARCHAR(20), @DATA_LIMITE_SUP, 112)) AND
      (@COD_OBJ IS NULL OR @COD_OBJ = A2.id_entidade)
      )
      ) AND
      (@USUARIO IS NULL OR A.usuario_alteracao COLLATE Latin1_General_CI_AI LIKE '%'+@USUARIO+'%') AND
      (@OPERACAO = 0 OR A.id_operacao = @OPERACAO) AND
      (@TIPO = 0 OR A.id_tipo = @TIPO) AND
      (@DATA_LIMITE_INF IS NULL OR @DATA_LIMITE_SUP IS NULL OR CONVERT(VARCHAR(20), A.data_modificacao, 112) BETWEEN CONVERT(VARCHAR(20), @DATA_LIMITE_INF, 112) AND CONVERT(VARCHAR(20), @DATA_LIMITE_SUP, 112))
      ORDER BY @ORDER_BY
    </selecionarAuditoriasFiltradas>
    <inserirAuditoria>
      INSERT INTO COLAB..auditoria (id_entidade, nome_entidade, data_modificacao, id_tipo, id_operacao, usuario_alteracao, nu_ano_mes)
      VALUES (@COD_OBJETO, @NOME_OBJETO, @DATA, @TIPO, @OPERACAO, @USUARIO, @ANO_MES);
    </inserirAuditoria>
    <inserirAuditoriaMudanca>
      INSERT INTO COLAB..auditoria_modificacao (id_auditoria, campo_modificado, modificacao)
      VALUES (@COD_AUDITORIA, @CAMPO_MODIFICADO, @MUDANCA);
    </inserirAuditoriaMudanca>
  </Auditoria>

  <Tag>
    <selecionarTagPorCodigo>
      SELECT
      T.id_tag, T.nome, T.idioma
      FROM
      COLAB..TAG T
      WHERE
      (T.id_tag = @ID)
    </selecionarTagPorCodigo>
    <selecionarTagsFiltradas>
      SELECT
      T.id_tag, T.nome, T.idioma
      FROM
      COLAB..TAG T
      WHERE
      (@FILTRO IS NULL OR T.nome LIKE '%' + @FILTRO + '%') AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA) AND
      ('@IDS' = 'NULL' OR T.id_tag IN (@IDS))
      ORDER BY @ORDER_BY
    </selecionarTagsFiltradas>
    <inserirTag>
      INSERT INTO COLAB..TAG (nome, idioma) VALUES (@NOME, @IDIOMA)
    </inserirTag>
    <atualizarTag>
      UPDATE COLAB..TAG SET nome = @NOME, idioma = @IDIOMA WHERE id_tag = @CODIGO
    </atualizarTag>
    <excluirTag>
      DELETE FROM COLAB..TAG WHERE id_tag = @ID
    </excluirTag>
  </Tag>

  <CategoriaPatrocinador>
    <selecionarCategoriaPatrocinadorPorCodigo>
      SELECT
      CP.id_categoria, CP.nome, CP.idioma
      FROM
      COLAB..CATEGORIA_PATROCINADOR CP
      WHERE
      (CP.id_categoria = @ID)
    </selecionarCategoriaPatrocinadorPorCodigo>
    <selecionarCategoriasPatrocinadorFiltradas>
      SELECT
      CP.id_categoria, CP.nome, CP.idioma
      FROM
      COLAB..CATEGORIA_PATROCINADOR CP
      WHERE
      (@FILTRO IS NULL OR CP.nome LIKE '%' + @FILTRO + '%') AND
      (@IDIOMA IS NULL OR CP.idioma = @IDIOMA)
      ORDER BY @ORDER_BY
    </selecionarCategoriasPatrocinadorFiltradas>
    <inserirCategoriaPatrocinador>
      INSERT INTO COLAB..CATEGORIA_PATROCINADOR (nome, idioma) VALUES (@NOME, @IDIOMA)
    </inserirCategoriaPatrocinador>
    <atualizarCategoriaPatrocinador>
      UPDATE COLAB..CATEGORIA_PATROCINADOR SET nome = @NOME, idioma = @IDIOMA WHERE id_categoria = @CODIGO
    </atualizarCategoriaPatrocinador>
    <excluirCategoriaPatrocinador>
      DELETE FROM COLAB..CATEGORIA_PATROCINADOR WHERE id_categoria = @ID
    </excluirCategoriaPatrocinador>
  </CategoriaPatrocinador>

  <CategoriaCOBCultural>
    <selecionarCategoriaCOBCulturalPorCodigo>
      SELECT
      CCC.id_categoria, CCC.nome
      FROM
      COLAB..CATEGORIA_COB_CULTURAL CCC
      WHERE
      (CCC.id_categoria = @ID)
    </selecionarCategoriaCOBCulturalPorCodigo>
    <selecionarCategoriasCOBCulturalFiltradas>
      SELECT
      CCC.id_categoria, CCC.nome
      FROM
      COLAB..CATEGORIA_COB_CULTURAL CCC
      WHERE
      (@FILTRO IS NULL OR CCC.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarCategoriasCOBCulturalFiltradas>
    <inserirCategoriaCOBCultural>
      INSERT INTO COLAB..CATEGORIA_COB_CULTURAL (nome) VALUES (@NOME)
    </inserirCategoriaCOBCultural>
    <atualizarCategoriaCOBCultural>
      UPDATE COLAB..CATEGORIA_COB_CULTURAL SET nome = @NOME where id_categoria = @CODIGO
    </atualizarCategoriaCOBCultural>
    <excluirCategoriaCOBCultural>
      DELETE FROM COLAB..CATEGORIA_COB_CULTURAL WHERE id_categoria = @ID
    </excluirCategoriaCOBCultural>
  </CategoriaCOBCultural>

  <Patrocinador>
    <selecionarPatrocinadorPorCodigo>
      SELECT
      P.id_patrocinador, P.nome, P.link, P.id_imagem_logotipo
      FROM
      COLAB..PATROCINADOR P
      WHERE
      (P.id_patrocinador = @ID)
    </selecionarPatrocinadorPorCodigo>
    <selecionarPatrocinadoresFiltrados>
      SELECT
      P.id_patrocinador, P.nome, P.link, P.id_imagem_logotipo
      FROM
      COLAB..PATROCINADOR P
      WHERE
      (@FILTRO IS NULL OR P.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarPatrocinadoresFiltrados>
    <inserirPatrocinador>
      INSERT INTO COLAB..PATROCINADOR (nome, link, id_imagem_logotipo) VALUES (@NOME, @LINK, @ID_IMAGEM_LOGOTIPO)
    </inserirPatrocinador>
    <atualizarPatrocinador>
      UPDATE COLAB..PATROCINADOR SET nome = @NOME, link = @LINK, id_imagem_logotipo = @ID_IMAGEM_LOGOTIPO WHERE id_patrocinador = @CODIGO
    </atualizarPatrocinador>
    <excluirPatrocinador>
      DELETE FROM COLAB..PATROCINADOR WHERE id_patrocinador = @ID
    </excluirPatrocinador>
    <removerLogotipoPatrocinador>
      UPDATE COLAB..PATROCINADOR SET id_imagem_logotipo = null WHERE id_patrocinador = @CODIGO
    </removerLogotipoPatrocinador>
  </Patrocinador>

  <PerfilAcesso>
    <selecionarPerfilAcessoPorCodigo>
      SELECT
      PA.id_perfil, PA.nome, PA.necessita_moderacao_conteudo, PA.edita_apenas_seu_conteudo, PA.ativo, PA.moderador, PA.pode_adicionar_acervo
      FROM
      COLAB..PERFIL_ACESSO PA
      WHERE
      (PA.id_perfil = @ID)
    </selecionarPerfilAcessoPorCodigo>
    <selecionarPerfisAcessoFiltrados>
      SELECT
      PA.id_perfil, PA.nome, PA.necessita_moderacao_conteudo, PA.edita_apenas_seu_conteudo, PA.ativo, PA.moderador, PA.pode_adicionar_acervo
      FROM
      COLAB..PERFIL_ACESSO PA
      WHERE
      (@FILTRO IS NULL OR PA.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarPerfisAcessoFiltrados>
    <inserirPerfilAcesso>
      INSERT INTO COLAB..PERFIL_ACESSO (nome, necessita_moderacao_conteudo, edita_apenas_seu_conteudo, ativo, moderador, pode_adicionar_acervo)
      VALUES (@NOME, @NECESSITA_MODERACAO, @EDITA_APENAS_SEU_CONTEUDO, @ATIVO, @MODERADOR, @PODE_ADICIONAR_ACERVO)
    </inserirPerfilAcesso>
    <atualizarPerfilAcesso>
      UPDATE COLAB..PERFIL_ACESSO SET nome = @NOME, necessita_moderacao_conteudo = @NECESSITA_MODERACAO, edita_apenas_seu_conteudo = @EDITA_APENAS_SEU_CONTEUDO, ativo = @ATIVO, moderador = @MODERADOR, pode_adicionar_acervo = @PODE_ADICIONAR_ACERVO
      WHERE id_perfil = @CODIGO
    </atualizarPerfilAcesso>
    <excluirPerfilAcesso>
      DELETE FROM COLAB..PERFIL_ACESSO WHERE id_perfil = @ID
    </excluirPerfilAcesso>
    <selecionarFuncionalidadesAcaoFiltradas>
      SELECT
      FA.ID_FUNCIONALIDADE_ACAO AS codigoFuncionalidadeAcao,
      A.ID_ACAO as codigoAcao, A.NOME AS nomeAcao,
      F.ID_FUNCIONALIDADE AS codigoFuncionalidade,
      F.NOME AS nomeFuncionalidade,
      F.ID_MODULO AS codigoModulo,
      M.NOME AS nomeModulo
      FROM
      COLAB..FUNCIONALIDADE_ACAO FA
      INNER JOIN COLAB..ACAO A ON A.ID_ACAO = FA.ID_ACAO
      INNER JOIN COLAB..FUNCIONALIDADE F ON F.ID_FUNCIONALIDADE = FA.ID_FUNCIONALIDADE
      INNER JOIN COLAB..MODULO M ON M.ID_MODULO = F.ID_MODULO
    </selecionarFuncionalidadesAcaoFiltradas>
    <selecionarFuncionalidadesAcaoAssociadasPerfil>
      SELECT
      FA.ID_FUNCIONALIDADE_ACAO AS codigoFuncionalidadeAcao,
      A.ID_ACAO as codigoAcao, A.NOME AS nomeAcao,
      F.ID_FUNCIONALIDADE AS codigoFuncionalidade,
      F.NOME AS nomeFuncionalidade,
      F.ID_MODULO AS codigoModulo,
      M.NOME AS nomeModulo
      FROM
      COLAB..PERFIL_FUNCIONALIDADE_ACAO PFA
      INNER JOIN COLAB..FUNCIONALIDADE_ACAO FA ON FA.ID_FUNCIONALIDADE_ACAO = PFA.ID_FUNCIONALIDADE_ACAO
      INNER JOIN COLAB..ACAO A ON A.ID_ACAO = FA.ID_ACAO
      INNER JOIN COLAB..FUNCIONALIDADE F ON F.ID_FUNCIONALIDADE = FA.ID_FUNCIONALIDADE
      INNER JOIN COLAB..MODULO M ON M.ID_MODULO = F.ID_MODULO
      WHERE
      (PFA.ID_PERFIL = @ID_PERFIL)
    </selecionarFuncionalidadesAcaoAssociadasPerfil>
    <adicionarFuncionalidadeAcaoAoPerfilAcesso>
      INSERT INTO COLAB..PERFIL_FUNCIONALIDADE_ACAO (id_funcionalidade_acao, id_perfil) VALUES (@ID_FUNCIONALIDADE_ACAO, @ID)
    </adicionarFuncionalidadeAcaoAoPerfilAcesso>
    <removerFuncionalidadesDoPerfilAcesso>
      DELETE FROM COLAB..PERFIL_FUNCIONALIDADE_ACAO WHERE id_perfil = @ID
    </removerFuncionalidadesDoPerfilAcesso>
    <mudarStatusPerfilAcesso>
      UPDATE COLAB..PERFIL_ACESSO SET ativo = @STATUS WHERE id_perfil = @ID
    </mudarStatusPerfilAcesso>
  </PerfilAcesso>

  <Arquivo>
    <selecionarArquivoPorCodigo>
      SELECT
      A.id_arquivo, A.binario
      FROM
      COLAB..ARQUIVO A
      WHERE
      (A.id_arquivo = @ID)
    </selecionarArquivoPorCodigo>
    <inserirArquivo>
      INSERT INTO COLAB..ARQUIVO (binario) VALUES (@BINARIO)
    </inserirArquivo>
    <atualizarArquivo>
      UPDATE COLAB..ARQUIVO SET binario = @BINARIO WHERE id_arquivo = @CODIGO
    </atualizarArquivo>
    <excluirArquivo>
      DELETE FROM COLAB..ARQUIVO WHERE id_arquivo = @ID
    </excluirArquivo>
    <selecionarArquivoDaImagem>
      SELECT
      A.id_arquivo, A.binario
      FROM
      COLAB..ARQUIVO A
      WHERE
      A.id_arquivo = (SELECT I.id_arquivo FROM COLAB..IMAGEM I WHERE I.id_imagem = @ID)
    </selecionarArquivoDaImagem>
    <selecionarMiniaturaDaImagem>
      SELECT
      A.id_arquivo, A.binario
      FROM
      COLAB..ARQUIVO A
      WHERE
      A.id_arquivo = (SELECT I.id_arquivo_thumb FROM COLAB..IMAGEM I WHERE I.id_imagem = @ID)
    </selecionarMiniaturaDaImagem>
    <selecionarArquivoDaPublicidade>
      SELECT
      A.id_arquivo, A.binario
      FROM
      COLAB..ARQUIVO A
      WHERE
      A.id_arquivo = (SELECT P.id_arquivo FROM COLAB..PUBLICIDADE P WHERE P.id_publicidade = @ID)
    </selecionarArquivoDaPublicidade>
  </Arquivo>

  <Imagem>
    <selecionarImagemPorCodigo>
      SELECT
      I.id_imagem,
      I.id_arquivo,
      I.id_arquivo_thumb,
      I.nome,
      I.tamanho,
      I.extensao,
      I.titulo_pt_br,
      I.descricao_pt_br,
      I.titulo_en_us,
      I.descricao_en_us,
      I.copyright,
      I.cutter,
      I.distribuidor,
      I.pais,
      I.localizacao,
      I.classificacao,
      I.complemento,
      I.resolucao,
      I.dpi,
      I.sistema_de_cor,
      I.liberada_para_galeria
      FROM
      COLAB..IMAGEM I
      WHERE
      (I.id_imagem = @ID)
    </selecionarImagemPorCodigo>
    <selecionarImagensFiltradas>
      SELECT DISTINCT
      I.id_imagem,
      I.id_arquivo,
      I.id_arquivo_thumb,
      I.nome,
      I.tamanho,
      I.extensao,
      I.titulo_pt_br,
      I.descricao_pt_br,
      I.titulo_en_us,
      I.descricao_en_us,
      I.copyright,
      I.cutter,
      I.distribuidor,
      I.pais,
      I.localizacao,
      I.classificacao,
      I.complemento,
      I.resolucao,
      I.dpi,
      I.sistema_de_cor,
      I.liberada_para_galeria
      FROM
      COLAB..IMAGEM I
      LEFT JOIN COLAB..TAG_IMAGEM TI ON TI.id_imagem = I.id_imagem
      LEFT JOIN COLAB..TAG T ON T.id_tag = TI.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR I.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      (@LIBERADA_PARA_GALERIA IS NULL OR I.liberada_para_galeria = @LIBERADA_PARA_GALERIA)
      ORDER BY @ORDER_BY
    </selecionarImagensFiltradas>
    <inserirImagem>
      INSERT INTO COLAB..IMAGEM (id_arquivo, id_arquivo_thumb, nome, tamanho, extensao, titulo_pt_br, descricao_pt_br, titulo_en_us, descricao_en_us, copyright,
      cutter, distribuidor, pais, localizacao, classificacao, complemento, resolucao, dpi, sistema_de_cor, liberada_para_galeria)
      VALUES (@ID_ARQUIVO, @ID_ARQUIVO_THUMB, @NOME, @TAMANHO, @EXTENSAO, @TITULO_PT_BR, @DESCRICAO_PT_BR, @TITULO_EN_US, @DESCRICAO_EN_US, @COPYRIGHT,
      @CUTTER, @DISTRIBUIDOR, @PAIS, @LOCALIZACAO, @CLASSIFICACAO, @COMPLEMENTO, @RESOLUCAO, @DPI, @SISTEMA_DE_COR, @LIBERADA_PARA_GALERIA)
    </inserirImagem>
    <atualizarImagem>
      UPDATE
      COLAB..IMAGEM
      SET
      titulo_pt_br = @TITULO_PT_BR,
      descricao_pt_br = @DESCRICAO_PT_BR,
      titulo_en_us = @TITULO_EN_US,
      descricao_en_us = @DESCRICAO_EN_US,
      cutter = @CUTTER,
      distribuidor = @DISTRIBUIDOR,
      pais = @PAIS,
      localizacao = @LOCALIZACAO,
      classificacao = @CLASSIFICACAO,
      complemento = @COMPLEMENTO
      WHERE
      (id_imagem = @CODIGO)
    </atualizarImagem>
    <excluirImagem>
      DELETE FROM COLAB..IMAGEM WHERE (id_imagem = @ID)
    </excluirImagem>
    <obterTagsImagem>
      SELECT
      TI.id_imagem,
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..TAG_IMAGEM TI
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TI.ID_TAG
      WHERE
      (TI.id_imagem = @ID) AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA)
    </obterTagsImagem>
    <adicionarTagsImagem>
      INSERT INTO COLAB..TAG_IMAGEM (id_imagem, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsImagem>
    <excluirTagsImagem>
      DELETE FROM COLAB..TAG_IMAGEM WHERE (id_imagem = @ID)
    </excluirTagsImagem>
  </Imagem>

  <Editoria>
    <selecionarEditoriaPorCodigo>
      SELECT
      E.id_editoria,
      E.nome,
      E.endereco_direto,
      E.idioma,
      E.id_pagina_inicial,
      E.link_facebook,
      E.link_youtube,
      E.link_twitter,
      E.link_googleplus,
      E.email_direto,
      E.cor,
      E.id_imagem,
      E.slug,
      I.nome AS imagem_nome,
      I.titulo_pt_br AS imagem_titulo,
      E.ativo
      FROM
      COLAB..EDITORIA E
      LEFT JOIN COLAB..IMAGEM I ON I.id_imagem = E.id_imagem
      WHERE
      (E.id_editoria = @ID)
    </selecionarEditoriaPorCodigo>
    <selecionarEditoriasFiltradas>
      SELECT
      E.id_editoria,
      E.nome,
      E.endereco_direto,
      E.idioma,
      E.id_pagina_inicial,
      E.link_facebook,
      E.link_youtube,
      E.link_twitter,
      E.link_googleplus,
      E.email_direto,
      E.cor,
      E.id_imagem,
      E.slug,
      I.nome AS imagem_nome,
      I.titulo_pt_br AS imagem_titulo,
      E.ativo
      FROM
      COLAB..EDITORIA E
      LEFT JOIN COLAB..IMAGEM I ON I.id_imagem = E.id_imagem
      WHERE
      (@FILTRO IS NULL OR E.nome LIKE '%' + @FILTRO + '%') AND
      (@IDIOMA IS NULL OR E.idioma = @IDIOMA) AND
      ('@IDS' = 'NULL' OR E.id_editoria IN (@IDS))
      ORDER BY @ORDER_BY
    </selecionarEditoriasFiltradas>
    <inserirEditoria>
      INSERT INTO COLAB..EDITORIA(nome, endereco_direto, idioma, id_pagina_inicial, link_facebook, link_youtube, link_twitter, link_googleplus, email_direto,
      cor, id_imagem, ativo, slug)
      VALUES (@NOME, @ENDERECO_DIRETO, @IDIOMA, @ID_PAGINA_INICIAL, @LINK_FACEBOOK, @LINK_YOUTUBE, @LINK_TWITTER, @LINK_GOOGLEPLUS, @EMAIL_DIRETO,
      @COR, @ID_IMAGEM, 1, @SLUG)
    </inserirEditoria>
    <atualizarEditoria>
      UPDATE
      COLAB..EDITORIA
      SET
      nome = @NOME,
      endereco_direto = @ENDERECO_DIRETO,
      idioma = @IDIOMA,
      link_facebook = @LINK_FACEBOOK,
      link_youtube = @LINK_YOUTUBE,
      link_twitter = @LINK_TWITTER,
      link_googleplus = @LINK_GOOGLEPLUS,
      email_direto = @EMAIL_DIRETO,
      id_pagina_inicial = @ID_PAGINA_INICIAL,
      cor = @COR,
      id_imagem = @ID_IMAGEM,
      slug = @SLUG
      WHERE
      id_editoria = @CODIGO
    </atualizarEditoria>
    <excluirEditoria>
      DELETE FROM COLAB..EDITORIA WHERE id_editoria = @ID
    </excluirEditoria>
    <mudarStatusEditoria>
      UPDATE COLAB..EDITORIA SET ativo = @STATUS WHERE id_editoria = @ID
    </mudarStatusEditoria>
  </Editoria>

  <Noticia>
    <selecionarNoticiaPorCodigo>
      SELECT
      N.id_noticia, N.id_imagem_destaque, N.idioma, N.titulo, N.subtitulo, N.slug, N.conteudo, N.data_noticia, N.flag_exibe_onbus, N.texto_onbus, N.ativo
      FROM
      COLAB..NOTICIA N
      WHERE
      (N.id_noticia = @ID)
    </selecionarNoticiaPorCodigo>
    <selecionarNoticiasFiltradas>
      SELECT
      N.id_noticia, N.id_imagem_destaque, N.idioma, N.titulo, N.subtitulo, N.slug, N.conteudo, N.data_noticia, N.flag_exibe_onbus, N.texto_onbus, N.ativo
      FROM
      COLAB..NOTICIA N
      LEFT JOIN COLAB..TAG_NOTICIA TN ON TN.id_noticia = N.id_noticia
      LEFT JOIN COLAB..TAG T ON T.ID_TAG = TN.ID_TAG
      WHERE
      (@FILTRO IS NULL OR N.titulo LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarNoticiasFiltradas>
    <selecionarNoticiasFiltradasPorEditoria>
      SELECT DISTINCT
      N.id_noticia, N.id_imagem_destaque, N.idioma, N.titulo, N.subtitulo, N.slug, N.conteudo, N.data_noticia, N.flag_exibe_onbus, N.texto_onbus, N.ativo
      FROM
      COLAB..NOTICIA N
      INNER JOIN COLAB..NOTICIA_EDITORIA NE
      ON NE.id_noticia = N.id_noticia
      WHERE
      (@FILTRO IS NULL OR N.titulo LIKE '%' + @FILTRO + '%') AND
      (@ID_EDITORIA IS NULL or NE.id_editoria = @ID_EDITORIA)
      ORDER BY @ORDER_BY
    </selecionarNoticiasFiltradasPorEditoria>
    <inserirNoticia>
      INSERT INTO COLAB..NOTICIA(id_imagem_destaque, idioma, titulo, subtitulo, slug, conteudo, data_noticia, flag_exibe_onbus, texto_onbus, ativo)
      VALUES (@ID_IMAGEM_DESTAQUE, @IDIOMA, @TITULO, @SUBTITULO, @SLUG, @CONTEUDO, @DATA_NOTICIA, @FLAG_EXIBE_ONBUS, @TEXTO_ONBUS, @ATIVO)
    </inserirNoticia>
    <atualizarNoticia>
      UPDATE
      COLAB..NOTICIA
      SET
      id_imagem_destaque = @ID_IMAGEM_DESTAQUE,
      idioma = @IDIOMA,
      titulo = @TITULO,
      subtitulo = @SUBTITULO,
      slug = @SLUG,
      conteudo = @CONTEUDO,
      data_noticia = @DATA_NOTICIA,
      flag_exibe_onbus = @FLAG_EXIBE_ONBUS,
      texto_onbus = @TEXTO_ONBUS,
      ativo = @ATIVO
      WHERE
      id_noticia = @ID
    </atualizarNoticia>
    <excluirNoticia>
      DELETE FROM COLAB..NOTICIA WHERE id_noticia = @ID
    </excluirNoticia>
    <mudarStatusNoticia>
      update COLAB..NOTICIA set ativo = @STATUS where id_noticia = @ID
    </mudarStatusNoticia>
    <obterEditoriasRelacionadasPorCodigoNoticia>
      SELECT
      NE.ID_NOTICIA AS id_noticia,
      E.ID_EDITORIA AS id_editoria,
      E.NOME AS nome,
      E.EMAIL_DIRETO AS email_direto,
      E.ENDERECO_DIRETO AS endereco_direto,
      E.ID_PAGINA_INICIAL AS id_pagina_inicial,
      E.LINK_FACEBOOK AS link_facebook,
      E.LINK_GOOGLEPLUS AS link_googleplus,
      E.LINK_TWITTER AS link_twitter,
      E.LINK_YOUTUBE AS link_youtube,
      E.ATIVO AS ativo,
      E.IDIOMA AS idioma
      FROM
      COLAB..NOTICIA_EDITORIA NE
      INNER JOIN COLAB..EDITORIA E ON E.ID_EDITORIA = NE.ID_EDITORIA
      WHERE
      (NE.ID_NOTICIA = @ID)
    </obterEditoriasRelacionadasPorCodigoNoticia>
    <obterTagsRelacionadasPorCodigoNoticia>
      SELECT
      TN.ID_NOTICIA AS id_noticia,
      T.ID_TAG AS id_tag,
      T.NOME AS nome,
      T.IDIOMA AS idioma
      FROM
      COLAB..TAG_NOTICIA TN
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TN.ID_TAG
      WHERE
      (TN.ID_NOTICIA = @ID)
    </obterTagsRelacionadasPorCodigoNoticia>
    <adicionarNoticiaEditoria>
      INSERT INTO COLAB..NOTICIA_EDITORIA (id_noticia, id_editoria) VALUES (@ID, @ID_EDITORIA)
    </adicionarNoticiaEditoria>
    <excluirNoticiaEditoria>
      DELETE FROM COLAB..NOTICIA_EDITORIA WHERE id_noticia = @ID
    </excluirNoticiaEditoria>
    <adicionarTagsNoticia>
      INSERT INTO COLAB..TAG_NOTICIA (id_noticia, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsNoticia>
    <excluirTagsNoticia>
      DELETE FROM COLAB..TAG_NOTICIA WHERE id_noticia = @ID
    </excluirTagsNoticia>
    <removerImagemDestaque>
      UPDATE COLAB..NOTICIA SET id_imagem_destaque = NULL WHERE id_noticia = @CODIGO
    </removerImagemDestaque>
  </Noticia>

  <Video>
    <selecionarVideoPorCodigo>
      SELECT
      V.id_video, V.link_youtube, V.titulo_pt_br, V.descricao_pt_br, V.titulo_en_us, V.descricao_en_us, V.duracao, V.classificacao, V.complemento, V.imagem_de_acervo, V.url_img_thumbnail
      FROM
      COLAB..VIDEO V
      WHERE
      (V.id_video = @ID)
    </selecionarVideoPorCodigo>
    <selecionarVideosFiltrados>
      SELECT DISTINCT
      V.id_video, V.link_youtube, V.titulo_pt_br, V.descricao_pt_br, V.titulo_en_us, V.descricao_en_us, V.duracao, V.classificacao, V.complemento, V.imagem_de_acervo, V.url_img_thumbnail
      FROM
      COLAB..VIDEO V
      LEFT JOIN COLAB..TAG_VIDEO TV ON TV.id_video = V.id_video
      LEFT JOIN COLAB..TAG T ON T.id_tag = TV.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR V.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarVideosFiltrados>
    <inserirVideo>
      INSERT INTO COLAB..VIDEO (link_youtube, titulo_pt_br, descricao_pt_br, titulo_en_us, descricao_en_us, duracao, classificacao, complemento, imagem_de_acervo, url_img_thumbnail) VALUES (@LINK_YOUTUBE, @TITULO_PT_BR, @DESCRICAO_PT_BR, @TITULO_EN_US, @DESCRICAO_EN_US, @DURACAO, @CLASSIFICACAO, @COMPLEMENTO, @IMAGEM_DE_ACERVO, @URL_IMG_THUMBNAIL)
    </inserirVideo>
    <atualizarVideo>
      UPDATE COLAB..VIDEO SET link_youtube = @LINK_YOUTUBE, titulo_pt_br = @TITULO_PT_BR, descricao_pt_br = @DESCRICAO_PT_BR, titulo_en_us = @TITULO_EN_US, descricao_en_us = @DESCRICAO_EN_US, duracao = @DURACAO, classificacao = @CLASSIFICACAO, complemento = @COMPLEMENTO, imagem_de_acervo = @IMAGEM_DE_ACERVO, url_img_thumbnail = @URL_IMG_THUMBNAIL WHERE id_video = @ID
    </atualizarVideo>
    <excluirVideo>
      DELETE FROM COLAB..VIDEO WHERE id_video = @ID
    </excluirVideo>
    <obterTagsVideoRelacionadasPorIdioma>
      SELECT
      TV.ID_VIDEO AS id_video,
      T.ID_TAG AS id_tag,
      T.NOME AS nome,
      T.IDIOMA AS idioma
      FROM
      COLAB..TAG_VIDEO TV
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TV.ID_TAG
      WHERE
      (TV.ID_VIDEO = @ID) AND
      (T.IDIOMA = @IDIOMA)
    </obterTagsVideoRelacionadasPorIdioma>
    <adicionarTagsVideo>
      INSERT INTO COLAB..TAG_VIDEO (id_video, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsVideo>
    <excluirTagsVideo>
      DELETE FROM COLAB..TAG_VIDEO WHERE id_video = @ID
    </excluirTagsVideo>
  </Video>

  <Pagina>
    <selecionarPaginaPorCodigo>
      SELECT
      P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome as nome_editoria, E.idioma, E.slug as slug_editoria,
      COUNT(WP.ID_WIDGET) AS quantidade_widgets_associados
      FROM
      COLAB..PAGINA P
      INNER JOIN COLAB..EDITORIA E ON E.id_editoria = P.id_editoria
      LEFT JOIN COLAB..WIDGET_PAGINA WP ON WP.ID_PAGINA = P.ID_PAGINA
      WHERE
      (P.id_pagina = @ID)
      GROUP BY P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome, E.idioma, E.slug
    </selecionarPaginaPorCodigo>
    <selecionarPaginaPorEditoriaESlug>
      SELECT
      P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome as nome_editoria, E.idioma, E.slug as slug_editoria,
      COUNT(WP.ID_WIDGET) AS quantidade_widgets_associados
      FROM
      COLAB..PAGINA P
      INNER JOIN COLAB..EDITORIA E ON E.id_editoria = P.id_editoria
      LEFT JOIN COLAB..WIDGET_PAGINA WP ON WP.ID_PAGINA = P.ID_PAGINA
      WHERE
      E.SLUG = @SIGLA_EDITORIA
      AND P.SLUG = @SLUG
      GROUP BY P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome, E.idioma, E.slug
    </selecionarPaginaPorEditoriaESlug>
    <selecionarPaginasFiltradas>
      SELECT
      P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome as nome_editoria, E.idioma, E.slug as slug_editoria,
      COUNT(WP.ID_WIDGET) AS quantidade_widgets_associados
      FROM
      COLAB..PAGINA P
      INNER JOIN COLAB..EDITORIA E ON E.id_editoria = P.id_editoria
      LEFT JOIN COLAB..WIDGET_PAGINA WP ON WP.ID_PAGINA = P.ID_PAGINA
      WHERE
      (@FILTRO IS NULL OR P.nome LIKE '%' + @FILTRO + '%') AND
      (@EDITORIA IS NULL OR P.id_editoria = @EDITORIA)
      GROUP BY P.id_pagina, P.nome, P.titulo_menu, P.tipo_template, P.id_editoria, P.exibe_no_menu, P.pagina_inicial_de_editoria, P.id_pagina_pai, P.slug, E.nome, E.idioma, E.slug
      ORDER BY @ORDER_BY
    </selecionarPaginasFiltradas>
    <inserirPagina>
      INSERT INTO COLAB..PAGINA (nome, titulo_menu, tipo_template, id_editoria, exibe_no_menu, pagina_inicial_de_editoria, id_pagina_pai, slug)
      VALUES (@NOME, @TITULO_MENU, @TIPO_TEMPLATE, @ID_EDITORIA, @EXIBE_NO_MENU, @PAGINA_INICIAL_DE_EDITORIA, NULLIF(@ID_PAGINA_PAI,0), @SLUG)
    </inserirPagina>
    <atualizarPagina>
      UPDATE COLAB..PAGINA SET
      nome = @NOME, titulo_menu = @TITULO_MENU, tipo_template = @TIPO_TEMPLATE, id_editoria = @ID_EDITORIA, exibe_no_menu = @EXIBE_NO_MENU, pagina_inicial_de_editoria = @PAGINA_INICIAL_DE_EDITORIA, id_pagina_pai = NULLIF(@ID_PAGINA_PAI,0), slug = @SLUG
      WHERE
      id_pagina = @ID
    </atualizarPagina>
    <excluirPagina>
      DELETE FROM COLAB..PAGINA WHERE id_pagina = @ID
    </excluirPagina>
    <selecionarWidgetsDaPagina>
      SELECT WP.ID_WIDGET, WP.ID_PAGINA, WP.ID_AREA_TEMPLATE, WP.ID_ORDEM, W.TIPO_WIDGET
      FROM
      COLAB..WIDGET_PAGINA WP
      INNER JOIN WIDGET W ON W.ID_WIDGET = WP.ID_WIDGET
      WHERE
      ID_PAGINA = @CODIGO_PAGINA
      ORDER BY ID_AREA_TEMPLATE, ID_ORDEM
    </selecionarWidgetsDaPagina>
  </Pagina>

  <Documento>
    <selecionarDocumentoPorCodigo>
      SELECT
      D.id_documento, D.titulo, D.descricao, DV.id_arquivo, DV.nome, DV.tamanho, DV.extensao, DV.versao
      FROM
      COLAB..DOCUMENTO D
      INNER JOIN COLAB..DOCUMENTO_VERSAO DV
      ON DV.id_documento = D.id_documento
      INNER JOIN
      (SELECT id_documento, MAX(versao) as versao FROM COLAB..DOCUMENTO_VERSAO DVV GROUP BY id_documento) DVV
      ON DVV.id_documento = D.id_documento AND DV.versao = DVV.versao
      WHERE
      (D.id_documento = @ID)
    </selecionarDocumentoPorCodigo>
    <selecionarDocumentosFiltrados>
      SELECT DISTINCT
      D.id_documento, D.titulo, D.descricao, DV.id_arquivo, DV.nome, DV.tamanho, DV.extensao, DV.versao
      FROM
      COLAB..DOCUMENTO D
      INNER JOIN COLAB..DOCUMENTO_VERSAO DV ON DV.id_documento = D.id_documento
      INNER JOIN (SELECT id_documento, MAX(versao) as versao FROM COLAB..DOCUMENTO_VERSAO DVV GROUP BY id_documento) DVV ON DVV.id_documento = D.id_documento AND DV.versao = DVV.versao
      LEFT JOIN COLAB..TAG_DOCUMENTO TD ON TD.id_documento = D.id_documento
      LEFT JOIN COLAB..TAG T ON T.id_tag = TD.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR D.titulo LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      ('@IDS' = 'NULL' OR D.id_documento IN (@IDS))
      ORDER BY @ORDER_BY
    </selecionarDocumentosFiltrados>
    <inserirDocumento>
      INSERT INTO COLAB..DOCUMENTO (titulo, descricao) VALUES (@TITULO, @DESCRICAO)
    </inserirDocumento>
    <atualizarDocumento>
      UPDATE COLAB..DOCUMENTO SET titulo = @TITULO, descricao = @DESCRICAO WHERE id_documento = @ID
    </atualizarDocumento>
    <excluirDocumento>
      DELETE FROM COLAB..DOCUMENTO WHERE id_documento = @ID
    </excluirDocumento>
    <obterTagsDocumentoRelacionadas>
      SELECT
      TD.ID_DOCUMENTO AS id_documento,
      T.ID_TAG AS id_tag,
      T.NOME AS nome,
      T.IDIOMA AS idioma
      FROM
      COLAB..TAG_DOCUMENTO TD
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TD.ID_TAG
      WHERE
      (TD.ID_DOCUMENTO = @ID)
    </obterTagsDocumentoRelacionadas>
    <adicionarTagsDocumento>
      INSERT INTO COLAB..TAG_DOCUMENTO (id_documento, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsDocumento>
    <excluirTagsDocumento>
      DELETE FROM COLAB..TAG_DOCUMENTO WHERE id_documento = @ID
    </excluirTagsDocumento>
    <adicionarVersaoDocumento>
      INSERT INTO COLAB..DOCUMENTO_VERSAO (id_documento, id_arquivo, nome, extensao, versao, tamanho) VALUES (@ID, @ID_ARQUIVO, @NOME, @EXTENSAO, @VERSAO, @TAMANHO)
    </adicionarVersaoDocumento>
    <selecionarVersaoDocumento>
      SELECT
      D.id_documento, D.titulo, D.descricao, DV.id_arquivo, DV.nome, DV.tamanho, DV.extensao, DV.versao
      FROM
      COLAB..DOCUMENTO D
      INNER JOIN COLAB..DOCUMENTO_VERSAO DV
      ON DV.id_documento = D.id_documento
      WHERE
      (DV.id_documento = @ID) AND (DV.versao = @VERSAO)
    </selecionarVersaoDocumento>
    <excluirVersaoDocumento>
      DELETE FROM COLAB..DOCUMENTO_VERSAO WHERE id_documento = @ID AND versao = @VERSAO
    </excluirVersaoDocumento>
    <excluirTodasVersoesDocumento>
      DELETE FROM COLAB..DOCUMENTO_VERSAO WHERE id_documento = @ID
    </excluirTodasVersoesDocumento>
  </Documento>

  <Publicidade>
    <selecionarPublicidadePorCodigo>
      SELECT
      P.id_publicidade,
      P.id_arquivo,
      P.nome,
      P.tamanho,
      P.extensao,
      P.titulo_pt_br,
      P.descricao_pt_br,
      P.titulo_en_us,
      P.descricao_en_us
      FROM
      COLAB..PUBLICIDADE P
      WHERE
      (P.id_publicidade = @ID)
    </selecionarPublicidadePorCodigo>
    <selecionarPublicidadesFiltradas>
      SELECT
      P.id_publicidade,
      P.id_arquivo,
      P.nome,
      P.tamanho,
      P.extensao,
      P.titulo_pt_br,
      P.descricao_pt_br,
      P.titulo_en_us,
      P.descricao_en_us
      FROM
      COLAB..PUBLICIDADE P
      WHERE
      (@FILTRO IS NULL OR P.nome LIKE '%' + @FILTRO + '%' OR P.titulo_pt_br LIKE '%' + @FILTRO + '%' OR P.titulo_en_us LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarPublicidadesFiltradas>
    <inserirPublicidade>
      INSERT INTO COLAB..PUBLICIDADE (id_arquivo, nome, tamanho, extensao, titulo_pt_br, descricao_pt_br, titulo_en_us, descricao_en_us)
      VALUES (@ID_ARQUIVO, @NOME, @TAMANHO, @EXTENSAO, @TITULO_PT_BR, @DESCRICAO_PT_BR, @TITULO_EN_US, @DESCRICAO_EN_US)
    </inserirPublicidade>
    <atualizarPublicidade>
      UPDATE
      COLAB..PUBLICIDADE
      SET
      titulo_pt_br = @TITULO_PT_BR,
      descricao_pt_br = @DESCRICAO_PT_BR,
      titulo_en_us = @TITULO_EN_US,
      descricao_en_us = @DESCRICAO_EN_US
      WHERE
      (id_publicidade = @CODIGO)
    </atualizarPublicidade>
    <excluirPublicidade>
      DELETE FROM COLAB..PUBLICIDADE WHERE (id_publicidade = @ID)
    </excluirPublicidade>
  </Publicidade>

  <Galeria>
    <selecionarGaleriaPorCodigo>
      SELECT
      G.id_galeria,
      G.tipo_galeria,
      G.titulo_pt_br,
      G.descricao_pt_br,
      G.titulo_en_us,
      G.descricao_en_us,
      G.data_galeria,
      G.id_destaque,
      G.ativo,
      CASE
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_IMG) THEN
      (SELECT I.titulo_pt_br FROM COLAB..IMAGEM I WHERE I.id_imagem = G.id_destaque)
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_VID) THEN
      (SELECT V.titulo_pt_br FROM COLAB..VIDEO V WHERE V.id_video = G.id_destaque)
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_DOC) THEN
      (SELECT D.titulo FROM COLAB..DOCUMENTO D WHERE D.id_documento = G.id_destaque)
      ELSE
      NULL
      END AS titulo_destaque
      FROM
      COLAB..GALERIA G
      WHERE
      (G.id_galeria = @ID)
    </selecionarGaleriaPorCodigo>
    <selecionarGaleriasFiltradas>
      SELECT DISTINCT
      G.id_galeria,
      G.tipo_galeria,
      G.titulo_pt_br,
      G.descricao_pt_br,
      G.titulo_en_us,
      G.descricao_en_us,
      G.data_galeria,
      G.id_destaque,
      G.ativo,
      CASE
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_IMG) THEN
      (SELECT I.titulo_pt_br FROM COLAB..IMAGEM I WHERE I.id_imagem = G.id_destaque)
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_VID) THEN
      (SELECT V.titulo_pt_br FROM COLAB..VIDEO V WHERE V.id_video = G.id_destaque)
      WHEN (G.id_destaque IS NOT NULL AND G.tipo_galeria = @TIPO_GALERIA_DOC) THEN
      (SELECT D.titulo FROM COLAB..DOCUMENTO D WHERE D.id_documento = G.id_destaque)
      ELSE
      NULL
      END AS titulo_destaque
      FROM
      COLAB..GALERIA G
      LEFT JOIN COLAB..TAG_GALERIA TG ON TG.id_galeria = G.id_galeria
      LEFT JOIN COLAB..TAG T ON T.id_tag = TG.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR G.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      (@TIPO_GALERIA IS NULL OR G.tipo_galeria = @TIPO_GALERIA)
      ORDER BY @ORDER_BY
    </selecionarGaleriasFiltradas>
    <inserirGaleria>
      INSERT INTO COLAB..GALERIA (tipo_galeria, titulo_pt_br, descricao_pt_br, titulo_en_us, descricao_en_us, data_galeria, id_destaque, ativo)
      VALUES (@TIPO_GALERIA, @TITULO_PT_BR, @DESCRICAO_PT_BR, @TITULO_EN_US, @DESCRICAO_EN_US, @DATA_GALERIA, @ID_DESTAQUE, 1)
    </inserirGaleria>
    <atualizarGaleria>
      UPDATE COLAB..GALERIA SET
      titulo_pt_br = @TITULO_PT_BR,
      descricao_pt_br = @DESCRICAO_PT_BR,
      titulo_en_us = @TITULO_EN_US,
      descricao_en_us = @DESCRICAO_EN_US,
      data_galeria = @DATA_GALERIA,
      id_destaque = @ID_DESTAQUE
      WHERE
      (id_galeria = @CODIGO)
    </atualizarGaleria>
    <excluirGaleria>
      DELETE FROM COLAB..GALERIA WHERE (id_galeria = @ID)
    </excluirGaleria>
    <mudarStatusGaleria>
      UPDATE COLAB..Galeria SET ativo = @STATUS WHERE id_galeria = @ID
    </mudarStatusGaleria>

    <selecionarTagsGaleria>
      SELECT
      TG.id_galeria,
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..TAG_GALERIA TG
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TG.ID_TAG
      WHERE
      (TG.id_galeria = @ID) AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA)
    </selecionarTagsGaleria>
    <inserirTagsGaleria>
      INSERT INTO COLAB..TAG_GALERIA (id_galeria, id_tag) VALUES (@ID, @ID_TAG)
    </inserirTagsGaleria>
    <excluirTagsGaleria>
      DELETE FROM COLAB..TAG_GALERIA WHERE (id_galeria = @ID)
    </excluirTagsGaleria>

    <selecionarImagensGaleria>
      SELECT
      I.id_imagem,
      I.nome,
      I.titulo_pt_br,
      I.descricao_pt_br,
      I.copyright
      FROM
      COLAB..IMAGENS_DA_GALERIA IG
      INNER JOIN COLAB..IMAGEM I ON I.id_imagem = IG.id_imagem
      WHERE
      (IG.id_galeria = @ID)
    </selecionarImagensGaleria>
    <inserirImagensGaleria>
      INSERT INTO COLAB..IMAGENS_DA_GALERIA (id_galeria, id_imagem) VALUES (@ID, @ID_IMAGEM)
    </inserirImagensGaleria>
    <excluirImagensGaleria>
      DELETE FROM COLAB..IMAGENS_DA_GALERIA
      WHERE
      (id_galeria = @ID) AND
      (@ID_IMAGEM IS NULL OR id_imagem = @ID_IMAGEM)
    </excluirImagensGaleria>

    <selecionarDocumentosGaleria>
      SELECT
      D.id_documento,
      D.titulo,
      D.descricao
      FROM
      COLAB..DOCUMENTOS_DA_GALERIA DG
      INNER JOIN COLAB..DOCUMENTO D ON D.id_documento = DG.id_documento
      WHERE
      (DG.id_galeria = @ID)
    </selecionarDocumentosGaleria>
    <inserirDocumentosGaleria>
      INSERT INTO COLAB..DOCUMENTOS_DA_GALERIA (id_galeria, id_documento) VALUES (@ID, @ID_DOCUMENTO)
    </inserirDocumentosGaleria>
    <excluirDocumentosGaleria>
      DELETE FROM COLAB..DOCUMENTOS_DA_GALERIA
      WHERE
      (id_galeria = @ID) AND
      (@ID_DOCUMENTO IS NULL OR id_documento = @ID_DOCUMENTO)
    </excluirDocumentosGaleria>

    <selecionarVideosGaleria>
      SELECT
      V.id_video,
      V.titulo_pt_br,
      V.descricao_pt_br,
      V.url_img_thumbnail
      FROM
      COLAB..VIDEOS_DA_GALERIA VG
      INNER JOIN COLAB..VIDEO V ON V.id_video = VG.id_video
      WHERE
      (VG.id_galeria = @ID)
    </selecionarVideosGaleria>
    <inserirVideosGaleria>
      INSERT INTO COLAB..VIDEOS_DA_GALERIA (id_galeria, id_video) VALUES (@ID, @ID_VIDEO)
    </inserirVideosGaleria>
    <excluirVideosGaleria>
      DELETE FROM COLAB..VIDEOS_DA_GALERIA
      WHERE
      (id_galeria = @ID) AND
      (@ID_VIDEO IS NULL OR id_video = @ID_VIDEO)
    </excluirVideosGaleria>

    <selecionarImagensFiltradasParaGaleria>
      SELECT DISTINCT
      I.id_imagem,
      I.nome,
      I.titulo_pt_br,
      I.descricao_pt_br,
      I.copyright
      FROM
      COLAB..IMAGEM I
      LEFT JOIN COLAB..TAG_IMAGEM TI ON TI.id_imagem = I.id_imagem
      LEFT JOIN COLAB..TAG T ON T.id_tag = TI.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR I.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      (I.liberada_para_galeria = 1) AND
      ('@IDS_EXCLUIDOS' = 'NULL' OR I.id_imagem NOT IN (@IDS_EXCLUIDOS)) AND
      (
      (@ID IS NULL) OR
      (I.id_imagem NOT IN
      (
      SELECT
      id_imagem
      FROM
      COLAB..IMAGENS_DA_GALERIA
      WHERE
      (id_galeria = @ID)
      )
      )
      OR ('@IDS_INCLUIDOS' != 'NULL' AND I.id_imagem IN (@IDS_INCLUIDOS))
      )
      ORDER BY @ORDER_BY
    </selecionarImagensFiltradasParaGaleria>

    <selecionarDocumentosFiltradosParaGaleria>
      SELECT DISTINCT
      D.id_documento,
      D.titulo,
      D.descricao
      FROM
      COLAB..DOCUMENTO D
      LEFT JOIN COLAB..TAG_DOCUMENTO TD ON TD.id_documento = D.id_documento
      LEFT JOIN COLAB..TAG T ON T.id_tag = TD.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR D.titulo LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      ('@IDS_EXCLUIDOS' = 'NULL' OR D.id_documento NOT IN (@IDS_EXCLUIDOS)) AND
      (
      (@ID IS NULL) OR
      (D.id_documento NOT IN
      (SELECT
      id_documento
      FROM
      COLAB..DOCUMENTOS_DA_GALERIA
      WHERE
      (id_galeria = @ID)
      )
      )
      OR ('@IDS_INCLUIDOS' != 'NULL' AND D.id_documento IN (@IDS_INCLUIDOS))
      )
      ORDER BY @ORDER_BY
    </selecionarDocumentosFiltradosParaGaleria>

    <selecionarVideosFiltradosParaGaleria>
      SELECT DISTINCT
      V.id_video,
      V.titulo_pt_br,
      V.descricao_pt_br,
      V.url_img_thumbnail
      FROM
      COLAB..VIDEO V
      LEFT JOIN COLAB..TAG_VIDEO TV ON TV.id_video = V.id_video
      LEFT JOIN COLAB..TAG T ON T.id_tag = TV.id_tag AND T.idioma = @IDIOMA_PT_BR
      WHERE
      (@FILTRO IS NULL OR V.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%') AND
      ('@IDS_EXCLUIDOS' = 'NULL' OR V.id_video NOT IN (@IDS_EXCLUIDOS)) AND
      (
      (@ID IS NULL) OR
      (V.id_video NOT IN
      (SELECT
      id_video
      FROM
      COLAB..VIDEOS_DA_GALERIA
      WHERE
      (id_galeria = @ID)
      )
      )
      OR ('@IDS_INCLUIDOS' != 'NULL' AND V.id_video IN (@IDS_INCLUIDOS))
      )
      ORDER BY @ORDER_BY
    </selecionarVideosFiltradosParaGaleria>

  </Galeria>

  <Usuario>
    <selecionarUsuarioPorCodigo>
      SELECT
      U.id_usuario,
      U.id_perfil,
      U.id_participante,
      PF.nome,
      PD.nu_documento,
      P.nm_participante,
      P.id_participante_tipo,
      PPFC.ds_login
      FROM COLAB..USUARIO U
      INNER JOIN COLAB..PERFIL_ACESSO PF
      ON U.ID_PERFIL = PF.ID_PERFIL
      INNER JOIN SIGEF..PARTICIPANTE P
      ON P.id_participante = U.id_participante
      INNER JOIN SIGEF..PARTICIPANTE_DOCUMENTO PD
      ON P.id_participante = PD.id_participante AND PD.id_documento = @TIPO_DOCUMENTO
      INNER JOIN SIGEF..PARTICIPANTE_PESSOA_FISICA_CONTA PPFC
      ON U.id_participante = PPFC.id_participante_pessoa_fisica
      WHERE
      U.id_usuario = @ID
    </selecionarUsuarioPorCodigo>
    <selecionarParticipanteSigefPorCpf>
      SELECT
      p.id_Participante
      FROM [SIGEF].[dbo].Participante p
      INNER JOIN [SIGEF].[dbo].Participante_Documento pd ON pd.id_Participante = p.id_Participante AND pd.id_Documento = @TIPO_DOCUMENTO
      WHERE
      pd.nu_Documento = @CPF
    </selecionarParticipanteSigefPorCpf>
    <SelecionarParticipanteSigefPorIdParticipante>
      SELECT
      P.id_participante,
      PD.nu_documento,
      P.nm_participante,
      P.id_participante_tipo,
      P.ds_Email,
      F.id_Funcao,
      F.nm_Funcao
      FROM SIGEF..PARTICIPANTE P
      INNER JOIN SIGEF..PARTICIPANTE_DOCUMENTO PD
      ON P.id_participante = PD.id_participante AND PD.id_documento = @TIPO_DOCUMENTO
      LEFT JOIN SIGEF..PARTICIPANTE_PESSOA_FISICA_ORGAO PPFO
      ON P.id_participante = PPFO.id_participante_pessoa_fisica
      LEFT JOIN SIGEF..FUNCAO F
      ON PPFO.id_funcao = F.id_funcao
      WHERE
      P.id_participante = @ID_PARTICIPANTE
    </SelecionarParticipanteSigefPorIdParticipante>
    <selecionarParticipantePessoaFisicaContaSigef>
      SELECT
      PPFC.ds_login
      FROM SIGEF..PARTICIPANTE_PESSOA_FISICA_CONTA PPFC
      WHERE
      PPFC.id_participante_pessoa_fisica = @ID_PARTICIPANTE
    </selecionarParticipantePessoaFisicaContaSigef>
    <selecionarUsuariosFiltrados>
      SELECT
      U.id_usuario,
      U.id_perfil,
      U.id_participante,
      PF.nome,
      PD.nu_documento,
      P.nm_participante,
      P.id_participante_tipo,
      PPFC.ds_login
      FROM
      COLAB..USUARIO U
      INNER JOIN COLAB..PERFIL_ACESSO PF ON U.ID_PERFIL = PF.ID_PERFIL
      INNER JOIN SIGEF..PARTICIPANTE P ON P.id_participante = U.id_participante
      INNER JOIN SIGEF..PARTICIPANTE_DOCUMENTO PD ON P.id_participante = PD.id_participante AND PD.id_documento = @TIPO_DOCUMENTO
      INNER JOIN SIGEF..PARTICIPANTE_PESSOA_FISICA_CONTA PPFC ON U.id_participante = PPFC.id_participante_pessoa_fisica
      WHERE
      (@FILTRO IS NULL OR P.nm_participante LIKE '%' + @FILTRO + '%') AND
      ('@IDS' = 'NULL' OR U.id_participante IN (@IDS))
      ORDER BY @ORDER_BY
    </selecionarUsuariosFiltrados>
    <inserirUsuario>
      INSERT INTO COLAB..USUARIO (id_participante, id_perfil) VALUES (@ID_PARTICIPANTE, @ID_PERFIL)
    </inserirUsuario>
    <inserirParticipanteOrgao>
      INSERT INTO SIGEF..PARTICIPANTE_ORGAO (id_participante, id_participante_pessoa_juridica)
      VALUES (@ID_PARTICIPANTE, @ID_PESSOA_JURIDICA)
    </inserirParticipanteOrgao>
    <inserirParticipantePessoaFisicaOrgao>
      INSERT INTO SIGEF..PARTICIPANTE_PESSOA_FISICA_ORGAO (id_participante_pessoa_fisica, id_participante_orgao, id_funcao, ds_email, fl_ativo)
      VALUES (@ID_PARTICIPANTE, @ID_PARTICIPANTE_ORGAO, @ID_FUNCAO, @EMAIL, 1)
    </inserirParticipantePessoaFisicaOrgao>
    <selecionarFuncaoSigef>
      select id_Funcao, nm_Funcao from SIGEF..FUNCAO where id_Funcao_Tipo = 1 AND (@FILTRO IS NULL OR nm_Funcao LIKE '%' + @FILTRO + '%')
    </selecionarFuncaoSigef>
    <inserirParticipantePessoaFisicaConta>
      USE [SIGEF];
      OPEN SYMMETRIC KEY sk_COB_Recurso DECRYPTION BY CERTIFICATE Recurso_Conta;
      INSERT INTO [SIGEF].[dbo].Participante_Pessoa_Fisica_Conta (ds_Login, ds_Senha, dt_Ult_Alteracao, fl_Ativo, fl_Troca_Senha, id_Participante_Pessoa_Fisica)
      SELECT @EMAIL, ENCRYPTBYKEY(KEY_GUID('sk_COB_Recurso'), '@SENHA'), GETDATE(), 1, 1, @ID_PARTICIPANTE;
    </inserirParticipantePessoaFisicaConta>
    <atualizarPerfilUsuario>
      UPDATE COLAB..USUARIO SET id_perfil = @ID_PERFIL WHERE (id_usuario = @ID)
    </atualizarPerfilUsuario>
    <atualizarSenhaPessoaFisicaConta>
      USE [SIGEF];
      OPEN SYMMETRIC KEY sk_COB_Recurso DECRYPTION BY CERTIFICATE Recurso_Conta;
      UPDATE [SIGEF].[dbo].Participante_Pessoa_Fisica_Conta
      SET ds_Senha = ENCRYPTBYKEY(KEY_GUID('sk_COB_Recurso'), '@SENHA'),
      fl_Troca_Senha = 0
      WHERE id_Participante_Pessoa_Fisica = @ID_PARTICIPANTE
    </atualizarSenhaPessoaFisicaConta>
    <excluirUsuario>
      DELETE FROM COLAB..USUARIO WHERE id_usuario = @ID
    </excluirUsuario>
    <inserirParticipante>
      INSERT INTO [SIGEF].[dbo].Participante (nm_Participante, ds_Email, dt_Cadastro, dt_Alteracao, fl_Ativo, id_Participante_Tipo)
      VALUES (@NOME, @EMAIL, GETDATE(), GETDATE(), 1, @TIPO_PARTICIPANTE);
    </inserirParticipante>
    <inserirParticipantePessoaFisica>
      MERGE INTO [SIGEF].[dbo].Participante_Pessoa_Fisica pf
      USING (
      VALUES (@ID_PARTICIPANTE)
      ) As source (id_Participante)
      ON pf.id_Participante = source.id_Participante
      WHEN MATCHED THEN
      UPDATE
      SET
      dt_Alteracao = GETDATE()
      WHEN NOT MATCHED THEN
      INSERT (id_Participante, dt_Alteracao, fl_Ativo)
      VALUES (id_Participante, GETDATE(), 1);
    </inserirParticipantePessoaFisica>
    <inserirParticipanteDocumento>
      INSERT INTO SIGEF..Participante_Documento(id_Participante,id_Documento,fl_Ativo,nu_Documento) VALUES (@ID_PARTICIPANTE, @TIPO_DOCUMENTO, 1, @CPF)
    </inserirParticipanteDocumento>
    <obterSenhaParticipante>
      USE [SIGEF];
      OPEN SYMMETRIC KEY sk_COB_Recurso DECRYPTION BY CERTIFICATE Recurso_Conta;
      SELECT
      CONVERT(varchar, DECRYPTBYKEY(PFC.ds_Senha)) As Password
      FROM
      [SIGEF].[dbo].Participante_Pessoa_Fisica_Conta PFC
      INNER JOIN [SIGEF].[dbo].Participante_Pessoa_Fisica PF ON PF.id_Participante = PFC.id_Participante_Pessoa_Fisica
      INNER JOIN [SIGEF].[dbo].Participante P ON P.id_Participante = PF.id_Participante
      WHERE
      (PF.id_Participante = @ID_PARTICIPANTE)
    </obterSenhaParticipante>
  </Usuario>

  <PublicacaoCOBCultural>
    <selecionarPublicacaoCOBCulturalPorCodigo>
      SELECT
      PC.id_publicacao,
      PC.id_categoria,
      CCC.nome,
      PC.titulo,
      PC.subtitulo,
      PC.link_maiores_detalhes,
      PC.data_publicacao,
      PC.descricao,
      PC.id_documento,
      PC.id_imagem_destaque,
      PC.ativo
      FROM COLAB..PUBLICACAO_CULTURAL PC
      INNER JOIN COLAB..CATEGORIA_COB_CULTURAL CCC
      ON PC.id_categoria = CCC.id_categoria
      WHERE PC.id_publicacao = @ID
    </selecionarPublicacaoCOBCulturalPorCodigo>
    <selecionarPublicacoesCOBCulturalFiltradas>
      SELECT
      PC.id_publicacao,
      PC.id_categoria,
      CCC.nome,
      PC.titulo,
      PC.subtitulo,
      PC.link_maiores_detalhes,
      PC.data_publicacao,
      PC.descricao,
      PC.id_documento,
      PC.id_imagem_destaque,
      PC.ativo
      FROM COLAB..PUBLICACAO_CULTURAL PC
      INNER JOIN COLAB..CATEGORIA_COB_CULTURAL CCC
      ON PC.id_categoria = CCC.id_categoria
      WHERE
      (@FILTRO IS NULL OR PC.titulo LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarPublicacoesCOBCulturalFiltradas>
    <inserirPublicacaoCOBCultural>
      INSERT INTO COLAB..PUBLICACAO_CULTURAL(id_categoria, titulo, subtitulo, link_maiores_detalhes, data_publicacao, descricao, id_imagem_destaque, id_documento, ativo)
      VALUES (@ID_CATEGORIA, @TITULO, @SUBTITULO, @LINK, @DATA_PUBLICACAO, @DESCRICAO, @ID_IMAGEM_DESTAQUE, @ID_DOCUMENTO, @ATIVO)
    </inserirPublicacaoCOBCultural>
    <atualizarPublicacaoCOBCultural>
      UPDATE
      COLAB..PUBLICACAO_CULTURAL
      SET
      id_categoria = @ID_CATEGORIA,
      titulo = @TITULO,
      subtitulo = @SUBTITULO,
      link_maiores_detalhes = @LINK,
      data_publicacao = @DATA_PUBLICACAO,
      descricao = @DESCRICAO,
      id_imagem_destaque = @ID_IMAGEM_DESTAQUE,
      id_documento = @ID_DOCUMENTO,
      ativo = @ATIVO
      WHERE
      id_publicacao = @ID
    </atualizarPublicacaoCOBCultural>
    <excluirPublicacaoCOBCultural>
      DELETE FROM COLAB..PUBLICACAO_CULTURAL WHERE id_publicacao = @ID
    </excluirPublicacaoCOBCultural>
    <mudarStatusPublicacaoCOBCultural>
      UPDATE COLAB..PUBLICACAO_CULTURAL set ativo = @STATUS where id_publicacao = @ID
    </mudarStatusPublicacaoCOBCultural>
  </PublicacaoCOBCultural>

  <Confederacao>
    <selecionarConfederacaoPorCodigo>
      SELECT
      C.id_confederacao,
      C.id_participante,
      P.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica,
      PPJ.ds_Site AS site_Confederacao,
      PPFO.ds_Email AS email_Confederacao,
      C.tipo_confederacao,
      C.descricao_pt_br,
      C.descricao_en_us,
      C.nu_telefone,
      C.nu_fax,
      C.id_logotipo,
      C.ativo,
      I.nome AS imagem_nome,
      I.titulo_pt_br AS imagem_titulo,
      PE.id_Logradouro_Tipo,
      LT.nm_Logradouro_Tipo,
      PE.nm_Logradouro,
      PE.nu_Residencia,
      PE.ds_Complemento,
      PE.nu_Cep,
      CI.id_Cidade,
      CI.nm_Cidade,
      E.id_Estado,
      E.cd_Sigla_Estado,
      E.nm_Estado,
      PA.id_Pais,
      PA.nm_Pais,
      U.nm_Participante AS unidade,
      PR.nm_Participante AS nome_Presidente,
      F.nm_Funcao AS funcao_Presidente,
      P_SUP.id_Participante AS id_Participante_Federacao,
      P_SUP.nm_Participante AS nome_Federacao,
      PPJ.ds_Site AS site_Federacao
      FROM
      COLAB..Confederacao C
      INNER JOIN SIGEF..Participante P ON P.id_Participante = C.id_participante AND id_Participante_Tipo = @PARTICIPANTE_TIPO_CONFEDERACAO
      INNER JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON PPJ.id_Participante = P.id_Participante
      LEFT JOIN COLAB..IMAGEM I ON I.id_imagem = C.id_logotipo
      INNER JOIN SIGEF..Participante_Orgao PO ON PO.id_Participante_Pessoa_Juridica = P.id_Participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PO.id_Participante = PPFO.id_Participante_Orgao AND PPFO.fl_Ativo = 1
      INNER JOIN SIGEF..Participante PR ON PPFO.id_Participante_Pessoa_Fisica = PR.id_Participante
      LEFT JOIN SIGEF..Funcao F ON F.id_Funcao = PPFO.id_Funcao
      INNER JOIN SIGEF..Participante U ON U.id_Participante = PO.id_Participante AND U.nm_Participante = 'Presidência'
      LEFT JOIN SIGEF..Participante_Endereco PE ON PE.id_Participante = PPJ.id_Participante
      LEFT JOIN FGE_CEP..Cidade CI ON CI.id_Cidade = PE.id_Cidade
      LEFT JOIN FGE_CEP..Estado E ON E.id_Estado = CI.id_Estado
      LEFT JOIN FGE_CEP..Pais PA ON PA.id_Pais = E.id_Pais
      LEFT JOIN SIGEF..Logradouro_Tipo LT ON LT.id_Logradouro_Tipo = PE.id_Logradouro_Tipo
      LEFT JOIN SIGEF..Participante P_SUP ON P_SUP.id_Participante = PPJ.id_Participante_Superior
      LEFT JOIN SIGEF..Participante_Pessoa_Juridica PPJ_SUP ON PPJ_SUP.id_Participante = P_SUP.id_Participante
      WHERE
      (C.id_confederacao = @ID)
    </selecionarConfederacaoPorCodigo>
    <selecionarConfederacoesFiltradas>
      SELECT DISTINCT
      C.id_confederacao,
      C.id_participante,
      P.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica,
      C.tipo_confederacao,
      C.descricao_pt_br,
      C.descricao_en_us,
      C.nu_telefone,
      C.nu_fax,
      C.id_logotipo,
      C.ativo
      FROM
      COLAB..Confederacao C
      LEFT JOIN COLAB..TAG_CONFEDERACAO TC ON TC.id_confederacao = C.id_confederacao
      LEFT JOIN COLAB..TAG T ON T.id_tag = TC.id_tag AND T.idioma = @IDIOMA_PT_BR
      INNER JOIN SIGEF..Participante P ON P.id_Participante = C.id_participante AND id_Participante_Tipo = @PARTICIPANTE_TIPO_CONFEDERACAO
      INNER JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON PPJ.id_Participante = P.id_Participante
      WHERE
      (@FILTRO IS NULL OR P.nm_Participante LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%' OR PPJ.ds_Sigla_Participante_Pessoa_Juridica LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarConfederacoesFiltradas>
    <inserirConfederacao>
      INSERT INTO COLAB..Confederacao (id_participante, tipo_confederacao, descricao_pt_br, descricao_en_us, id_logotipo, nu_telefone, nu_fax, ativo)
      VALUES (@ID_PARTICIPANTE, @TIPO_CONFEDERACAO, @DESCRICAO_PT_BR, @DESCRICAO_EN_US, @ID_LOGOTIPO, @TELEFONE, @FAX, 1)
    </inserirConfederacao>
    <atualizarConfederacao>
      UPDATE
      COLAB..Confederacao
      SET
      tipo_confederacao = @TIPO_CONFEDERACAO,
      descricao_pt_br = @DESCRICAO_PT_BR,
      descricao_en_us = @DESCRICAO_EN_US,
      id_logotipo = @ID_LOGOTIPO,
      nu_telefone = @TELEFONE,
      nu_fax = @FAX
      WHERE
      (id_confederacao = @CODIGO)
    </atualizarConfederacao>
    <excluirConfederacao>
      DELETE FROM COLAB..Confederacao WHERE (id_confederacao = @ID)
    </excluirConfederacao>
    <mudarStatusConfederacao>
      UPDATE COLAB..Confederacao SET ativo = @STATUS WHERE id_confederacao = @ID
    </mudarStatusConfederacao>

    <obterTagsConfederacao>
      SELECT
      TC.id_confederacao,
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..TAG_CONFEDERACAO TC
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TC.ID_TAG
      WHERE
      (TC.id_confederacao = @ID) AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA)
    </obterTagsConfederacao>
    <adicionarTagsConfederacao>
      INSERT INTO COLAB..TAG_CONFEDERACAO (id_confederacao, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsConfederacao>
    <excluirTagsConfederacao>
      DELETE FROM COLAB..TAG_CONFEDERACAO WHERE (id_confederacao = @ID)
    </excluirTagsConfederacao>

    <selecionarConfederacoesSIGEF>
      SELECT
      C.id_Participante,
      C.nm_Participante
      FROM
      SIGEF..Participante P
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica = P.id_Participante AND PPFO.fl_Ativo = 1
      LEFT JOIN SIGEF..Funcao F ON F.id_Funcao = PPFO.id_Funcao
      INNER JOIN SIGEF..Participante_Orgao PO ON PO.id_Participante = PPFO.id_Participante_Orgao
      INNER JOIN SIGEF..Participante U ON U.id_Participante = PO.id_Participante AND U.nm_Participante = 'Presidência'
      INNER JOIN SIGEF..Participante C ON C.id_Participante = PO.id_Participante_Pessoa_Juridica AND C.id_Participante_Tipo = @PARTICIPANTE_TIPO_CONFEDERACAO
      INNER JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON C.id_Participante = PPJ.id_Participante
      WHERE
      (P.nm_Participante NOT LIKE 'COB_%') AND
      (C.id_participante NOT IN
      (SELECT CO.id_participante FROM COLAB..Confederacao CO)
      ) AND
      (P.fl_Ativo = 1)
      ORDER BY C.nm_Participante ASC
    </selecionarConfederacoesSIGEF>
    <selecionarConfederacaoSIGEFPorCodigo>
      SELECT
      C.id_Participante,
      C.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica,
      PPJ.ds_Site AS site_Confederacao,
      PPFO.ds_Email AS email_Confederacao,
      PE.id_Logradouro_Tipo,
      LT.nm_Logradouro_Tipo,
      PE.nm_Logradouro,
      PE.nu_Residencia,
      PE.ds_Complemento,
      PE.nu_Cep,
      CI.id_Cidade,
      CI.nm_Cidade,
      E.id_Estado,
      E.cd_Sigla_Estado,
      E.nm_Estado,
      PA.id_Pais,
      PA.nm_Pais,
      U.nm_Participante AS unidade,
      P.nm_Participante AS nome_Presidente,
      F.nm_Funcao AS funcao_Presidente,
      P_SUP.id_Participante AS id_Participante_Federacao,
      P_SUP.nm_Participante AS nome_Federacao,
      PPJ.ds_Site AS site_Federacao
      FROM
      SIGEF..Participante P
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica = P.id_Participante AND PPFO.fl_Ativo = 1
      LEFT JOIN SIGEF..Funcao F ON F.id_Funcao = PPFO.id_Funcao
      INNER JOIN SIGEF..Participante_Orgao PO ON PO.id_Participante = PPFO.id_Participante_Orgao
      INNER JOIN SIGEF..Participante U ON U.id_Participante = PO.id_Participante AND U.nm_Participante = 'Presidência'
      INNER JOIN SIGEF..Participante C ON C.id_Participante = PO.id_Participante_Pessoa_Juridica AND C.id_Participante_Tipo = @PARTICIPANTE_TIPO_CONFEDERACAO
      INNER JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON C.id_Participante = PPJ.id_Participante
      LEFT JOIN SIGEF..Participante_Endereco PE ON PE.id_Participante = PPJ.id_Participante
      LEFT JOIN FGE_CEP..Cidade CI ON CI.id_Cidade = PE.id_Cidade
      LEFT JOIN FGE_CEP..Estado E ON E.id_Estado = CI.id_Estado
      LEFT JOIN FGE_CEP..Pais PA ON PA.id_Pais = E.id_Pais
      LEFT JOIN SIGEF..Logradouro_Tipo LT ON LT.id_Logradouro_Tipo = PE.id_Logradouro_Tipo
      LEFT JOIN SIGEF..Participante P_SUP ON P_SUP.id_Participante = PPJ.id_Participante_Superior
      LEFT JOIN SIGEF..Participante_Pessoa_Juridica PPJ_SUP ON PPJ_SUP.id_Participante = P_SUP.id_Participante
      WHERE
      (P.nm_Participante NOT LIKE 'COB_%') AND
      (P.fl_Ativo = 1) AND
      (C.id_Participante = @ID)
    </selecionarConfederacaoSIGEFPorCodigo>
  </Confederacao>

  <Atleta>
    <selecionarAtletaPorCodigo>
      SELECT DISTINCT
      A.id_atleta,
      P.id_participante,
      P.nm_Participante,
      A.nome_exibicao,
      PF.fl_Sexo,
      PF.dt_Nascimento,
      C.id_Cidade,
      C.nm_Cidade,
      E.id_Estado,
      E.nm_Estado,
      E.cd_Sigla_Estado,
      PA.id_Pais,
      PA.nm_Pais,
      PF.ds_facebook,
      PF.ds_Twitter,
      PF.ds_Instagram,
      PD.nu_Documento,
      PF.nu_Altura,
      PF.nu_Peso,
      A.descricao_pt_br,
      A.descricao_en_us,
      A.ativo
      FROM
      COLAB..Atleta A
      INNER JOIN SIGEF..Participante P ON P.id_Participante = A.id_participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica PF ON PF.id_Participante = P.id_Participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica = P.id_Participante AND PPFO.id_Funcao = @FUNCAO_ATLETA
      LEFT JOIN SIGEF..Participante_Documento PD ON PD.id_Participante = P.id_Participante AND PD.fl_Ativo = 1 AND PD.id_Documento = @DOCUMENTO_CPF
      LEFT JOIN FGE_CEP..Cidade C ON PF.id_Cidade = C.id_Cidade
      LEFT JOIN FGE_CEP..Estado E ON C.id_Estado = E.id_Estado
      LEFT JOIN FGE_CEP..Pais PA ON PF.id_Pais_Nacionalidade = PA.id_Pais
      WHERE
      (A.id_atleta = @ID)
    </selecionarAtletaPorCodigo>
    <selecionarAtletasFiltrados>
      SELECT DISTINCT
      A.id_atleta,
      P.id_participante,
      P.nm_Participante,
      A.nome_exibicao,
      PF.fl_Sexo,
      PF.dt_Nascimento,
      C.id_Cidade,
      C.nm_Cidade,
      E.id_Estado,
      E.nm_Estado,
      E.cd_Sigla_Estado,
      PA.id_Pais,
      PA.nm_Pais,
      PF.ds_facebook,
      PF.ds_Twitter,
      PF.ds_Instagram,
      PD.nu_Documento,
      PF.nu_Altura,
      PF.nu_Peso,
      A.descricao_pt_br,
      A.descricao_en_us,
      A.ativo
      FROM
      COLAB..Atleta A
      INNER JOIN SIGEF..Participante P ON P.id_Participante = A.id_participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica PF ON PF.id_Participante = P.id_Participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica = P.id_Participante AND PPFO.id_Funcao = @FUNCAO_ATLETA
      LEFT JOIN SIGEF..Participante_Documento PD ON PD.id_Participante = P.id_Participante AND PD.fl_Ativo = 1 AND PD.id_Documento = @DOCUMENTO_CPF
      LEFT JOIN FGE_CEP..Cidade C ON PF.id_Cidade = C.id_Cidade
      LEFT JOIN FGE_CEP..Estado E ON C.id_Estado = E.id_Estado
      LEFT JOIN FGE_CEP..Pais PA ON PF.id_Pais_Nacionalidade = PA.id_Pais
      LEFT JOIN SIGEF..Participante_Pessoa_Fisica_Modalidade PPFM ON PPFM.id_Participante_Pessoa_Fisica = P.id_participante
      LEFT JOIN SIGEF..Modalidade M ON M.id_Modalidade = PPFM.id_Modalidade AND M.fl_Ativo = 1
      LEFT JOIN SIGEF..Esporte ES ON ES.id_Esporte = M.id_Esporte AND ES.fl_Ativo = 1
      WHERE
      (@FILTRO IS NULL OR A.nome_exibicao LIKE '%' + @FILTRO + '%' OR M.nm_Modalidade LIKE '%' + @FILTRO + '%' OR ES.nm_Esporte LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarAtletasFiltrados>
    <inserirAtleta>
      INSERT INTO COLAB..ATLETA (id_participante, nome_exibicao, descricao_pt_br, descricao_en_us, ativo)
      VALUES (@ID_PARTICIPANTE, @NOME_EXIBICAO, @DESCRICAO_PT_BR, @DESCRICAO_EN_US, 1)
    </inserirAtleta>
    <atualizarAtleta>
      UPDATE
      COLAB..ATLETA
      SET
      nome_exibicao = @NOME_EXIBICAO,
      descricao_pt_br = @DESCRICAO_PT_BR,
      descricao_en_us = @DESCRICAO_EN_US
      WHERE
      (id_atleta = @CODIGO)
    </atualizarAtleta>
    <excluirAtleta>
      DELETE FROM COLAB..ATLETA WHERE (id_atleta = @ID)
    </excluirAtleta>
    <mudarStatusAtleta>
      UPDATE COLAB..ATLETA SET ativo = @STATUS WHERE id_atleta = @ID
    </mudarStatusAtleta>

    <selecionarAtletasSIGEF>
      SELECT DISTINCT
      P.id_participante,
      P.nm_Participante,
      PF.fl_Sexo,
      PF.dt_Nascimento,
      C.id_Cidade,
      C.nm_Cidade,
      E.id_Estado,
      E.nm_Estado,
      E.cd_Sigla_Estado,
      PA.id_Pais,
      PA.nm_Pais,
      PF.ds_facebook,
      PF.ds_Twitter,
      PF.ds_Instagram,
      PD.nu_Documento,
      PF.nu_Altura,
      PF.nu_Peso
      FROM
      SIGEF..Participante P
      INNER JOIN SIGEF..Participante_Pessoa_Fisica PF ON PF.id_Participante = P.id_Participante
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica = P.id_Participante AND PPFO.id_Funcao = @FUNCAO_ATLETA
      LEFT JOIN SIGEF..Participante_Documento PD ON PD.id_Participante = P.id_Participante AND PD.fl_Ativo = 1 AND PD.id_Documento = @DOCUMENTO_CPF
      LEFT JOIN FGE_CEP..Cidade C ON PF.id_Cidade = C.id_Cidade
      LEFT JOIN FGE_CEP..Estado E ON C.id_Estado = E.id_Estado
      LEFT JOIN FGE_CEP..Pais PA ON PF.id_Pais_Nacionalidade = PA.id_Pais
      LEFT JOIN SIGEF..Participante_Pessoa_Fisica_Modalidade PPFM ON PPFM.id_Participante_Pessoa_Fisica = P.id_participante
      LEFT JOIN SIGEF..Modalidade M ON M.id_Modalidade = PPFM.id_Modalidade AND M.fl_Ativo = 1
      LEFT JOIN SIGEF..Esporte ES ON ES.id_Esporte = M.id_Esporte AND ES.fl_Ativo = 1
      WHERE
      (@FILTRO IS NULL OR P.nm_Participante LIKE '%' + @FILTRO + '%' OR M.nm_Modalidade LIKE '%' + @FILTRO + '%' OR ES.nm_Esporte LIKE '%' + @FILTRO + '%') AND
      (P.id_participante NOT IN
      (SELECT A.id_participante FROM COLAB..Atleta A)
      ) AND
      (P.fl_Ativo = 1)
      ORDER BY @ORDER_BY
    </selecionarAtletasSIGEF>

    <selecionarModalidadesDoAtleta>
      SELECT
      M.id_Modalidade,
      M.nm_Modalidade,
      E.id_Esporte,
      E.nm_Esporte
      FROM
      SIGEF..Participante_Pessoa_Fisica_Modalidade PPFM
      INNER JOIN SIGEF..Modalidade M ON M.id_Modalidade = PPFM.id_Modalidade AND M.fl_Ativo = 1
      INNER JOIN SIGEF..Esporte E ON E.id_Esporte = M.id_Esporte AND E.fl_Ativo = 1
      WHERE
      (PPFM.fl_Ativo = 1) AND
      (PPFM.id_Participante_Pessoa_Fisica = @ID)
      ORDER BY E.nm_Esporte, M.nm_Modalidade
    </selecionarModalidadesDoAtleta>

    <selecionarFotoDoAtleta>
      SELECT
      SGA.id_Arquivo,
      SGA.bn_Arquivo As Binario
      FROM
      SIGEF..Participante_Pessoa_Fisica_Arquivo PPFA
      INNER JOIN SIGEF..Participante_Pessoa_Fisica_Orgao PPFO ON PPFO.id_Participante_Pessoa_Fisica_Orgao = PPFA.id_Participante_Pessoa_Fisica_Orgao AND PPFO.fl_Ativo = 1
      INNER JOIN SIGEF..Arquivo SA ON SA.id_Arquivo = PPFA.id_Arquivo AND SA.id_Arquivo_Tipo = @ARQUIVO_TIPO_FOTO
      INNER JOIN SIGEF_ARQUIVO..Arquivo SGA ON SA.id_Arquivo = SGA.id_Arquivo
      WHERE
      PPFO.id_Participante_Pessoa_Fisica = @ID
    </selecionarFotoDoAtleta>
  </Atleta>

  <Widget>
    <inserirWidget>
      INSERT INTO COLAB..WIDGET(tipo_widget, nome) VALUES (@TIPO_WIDGET, @NOME)
    </inserirWidget>
    <atualizarWidget>
      UPDATE COLAB..WIDGET SET nome = @NOME
      WHERE id_widget = @ID_WIDGET
    </atualizarWidget>
    <excluirWidget>
      DELETE FROM COLAB..WIDGET WHERE id_widget = @ID_WIDGET
    </excluirWidget>
    <inserirWidgetNaPagina>
      INSERT INTO COLAB..WIDGET_PAGINA (id_widget, id_pagina, id_area_template, id_ordem)
      VALUES (@ID_WIDGET, @ID_PAGINA, @ID_AREA_TEMPLATE, @ID_ORDEM)
    </inserirWidgetNaPagina>
    <atualizarWidgetNaPagina>
      UPDATE COLAB..WIDGET_PAGINA SET id_pagina = @ID_PAGINA , id_area_template = @ID_AREA_TEMPLATE, id_ordem = @ID_ORDEM
      WHERE id_widget = @ID_WIDGET
    </atualizarWidgetNaPagina>
    <excluirWidgetNaPagina>
      DELETE FROM COLAB..WIDGET_PAGINA WHERE id_widget = @ID_WIDGET
    </excluirWidgetNaPagina>
  </Widget>

  <WidgetVejaTambem>
    <inserirWidgetVejaTambem>
      INSERT INTO COLAB..WIDGET_VEJA_TAMBEM (id_widget, id_pagina_1, id_pagina_2, id_pagina_3, texto_link_pagina_1, texto_link_pagina_2, texto_link_pagina_3)
      VALUES (@ID_WIDGET, @ID_PAGINA_1, @ID_PAGINA_2, @ID_PAGINA_3, @TEXTO_LINK_PAGINA_1, @TEXTO_LINK_PAGINA_2, @TEXTO_LINK_PAGINA_3)
    </inserirWidgetVejaTambem>
    <selecionarWidgetVejaTambem>
      SELECT
      WVT.ID_WIDGET, WVT.ID_PAGINA_1, WVT.ID_PAGINA_2, WVT.ID_PAGINA_3, WVT.TEXTO_LINK_PAGINA_1, WVT.TEXTO_LINK_PAGINA_2, WVT.TEXTO_LINK_PAGINA_3,
      P1.NOME AS NOME_PAGINA_1, P1.SLUG AS SLUG_PAGINA_1, E1.SLUG AS SLUG_EDITORIA_1, PP1.SLUG AS SLUG_PAGINA_PAI_1,
      P2.NOME AS NOME_PAGINA_2, P2.SLUG AS SLUG_PAGINA_2, E2.SLUG AS SLUG_EDITORIA_2, PP2.SLUG AS SLUG_PAGINA_PAI_2,
      P3.NOME AS NOME_PAGINA_3, P3.SLUG AS SLUG_PAGINA_3, E3.SLUG AS SLUG_EDITORIA_3, PP3.SLUG AS SLUG_PAGINA_PAI_3

      FROM
      WIDGET_VEJA_TAMBEM WVT

      LEFT JOIN PAGINA P1 ON P1.ID_PAGINA = WVT.ID_PAGINA_1
      LEFT JOIN EDITORIA E1 ON E1.ID_EDITORIA = P1.ID_EDITORIA
      LEFT JOIN PAGINA PP1 ON P1.ID_PAGINA_PAI = PP1.ID_PAGINA

      LEFT JOIN PAGINA P2 ON P2.ID_PAGINA = WVT.ID_PAGINA_2
      LEFT JOIN EDITORIA E2 ON E2.ID_EDITORIA = P2.ID_EDITORIA
      LEFT JOIN PAGINA PP2 ON P2.ID_PAGINA_PAI = PP2.ID_PAGINA

      LEFT JOIN PAGINA P3 ON P3.ID_PAGINA = WVT.ID_PAGINA_3
      LEFT JOIN EDITORIA E3 ON E3.ID_EDITORIA = P3.ID_EDITORIA
      LEFT JOIN PAGINA PP3 ON P3.ID_PAGINA_PAI = PP3.ID_PAGINA

      WHERE
      WVT.ID_WIDGET= @CODIGO_WIDGET
    </selecionarWidgetVejaTambem>
    <selecionarWidgetsVejaTambemDaPagina>
      SELECT
      WVT.ID_WIDGET, WVT.ID_PAGINA_1, WVT.ID_PAGINA_2, WVT.ID_PAGINA_3, WVT.TEXTO_LINK_PAGINA_1, WVT.TEXTO_LINK_PAGINA_2, WVT.TEXTO_LINK_PAGINA_3,
      WP.ID_PAGINA, WP.ID_AREA_TEMPLATE, WP.ID_ORDEM,
      P1.NOME AS NOME_PAGINA_1, P2.NOME AS NOME_PAGINA_2, P3.NOME AS NOME_PAGINA_3
      FROM
      WIDGET_VEJA_TAMBEM WVT
      INNER JOIN WIDGET_PAGINA WP ON WVT.ID_WIDGET = WP.ID_WIDGET
      LEFT JOIN PAGINA P1 ON P1.ID_PAGINA = WVT.ID_PAGINA_1
      LEFT JOIN PAGINA P2 ON P2.ID_PAGINA = WVT.ID_PAGINA_2
      LEFT JOIN PAGINA P3 ON P3.ID_PAGINA = WVT.ID_PAGINA_3
      WHERE
      WP.ID_PAGINA = @ID_PAGINA
      ORDER BY
      WP.ID_AREA_TEMPLATE, WP.ID_ORDEM
    </selecionarWidgetsVejaTambemDaPagina>
    <atualizarWidgetVejaTambem>
      UPDATE COLAB..WIDGET_VEJA_TAMBEM SET id_pagina_1 = @ID_PAGINA_1, id_pagina_2 = @ID_PAGINA_2, id_pagina_3 = @ID_PAGINA_3, texto_link_pagina_1 = @TEXTO_LINK_PAGINA_1,texto_link_pagina_2 = @TEXTO_LINK_PAGINA_2, texto_link_pagina_3 = @TEXTO_LINK_PAGINA_3
      WHERE id_widget = @ID_WIDGET
    </atualizarWidgetVejaTambem>
    <excluirWidgetVejaTambem>
      DELETE FROM COLAB..WIDGET_VEJA_TAMBEM WHERE id_widget = @ID_WIDGET
    </excluirWidgetVejaTambem>
  </WidgetVejaTambem>

  <WidgetPatrocinador>
    <selecionarWidgetPatrocinador>
      SELECT
        WPT.ID_WIDGET,
        WPT.TIPO_EXIBICAO,
        W.TIPO_WIDGET
      FROM
        COLAB..WIDGET_PATROCINADOR WPT
        INNER JOIN COLAB..WIDGET W ON W.ID_WIDGET = WPT.ID_WIDGET
      WHERE
        WPT.ID_WIDGET= @CODIGO_WIDGET
    </selecionarWidgetPatrocinador>
    <selecionarWidgetsPatrocinadorDaPagina>
      SELECT
        WP.ID_WIDGET,
        WP.ID_PAGINA,
        WP.ID_ORDEM,
        WP.ID_AREA_TEMPLATE,
        WPT.TIPO_EXIBICAO,
        W.TIPO_WIDGET
      FROM
        COLAB..WIDGET_PATROCINADOR WPT
        INNER JOIN COLAB..WIDGET W ON W.ID_WIDGET = WPT.ID_WIDGET
        INNER JOIN COLAB..WIDGET_PAGINA WP ON WPT.ID_WIDGET = WP.ID_WIDGET
      WHERE
        WP.ID_PAGINA = @ID_PAGINA
      ORDER BY
        WP.ID_AREA_TEMPLATE, WP.ID_ORDEM
    </selecionarWidgetsPatrocinadorDaPagina>
    <selecionarCategoriasDoWidgetPatrocinador>
      SELECT DISTINCT
      PW.id_widget,
      PW.id_categoria,
      CP.nome as nome_categoria,
      CP.idioma as idioma_categoria
      FROM COLAB..PATROCINADORES_WIDGET PW
      INNER JOIN COLAB..CATEGORIA_PATROCINADOR CP
      ON PW.ID_CATEGORIA = CP.ID_CATEGORIA
      WHERE PW.id_widget= @ID_WIDGET
    </selecionarCategoriasDoWidgetPatrocinador>
    <selecionarPatrocinadoresCategoriaDoWidgetPatrocinador>
      SELECT
      PW.id_patrocinador,
      P.nome as nome_patrocinador,
      P.link,
      P.id_imagem_logotipo
      FROM COLAB..PATROCINADORES_WIDGET PW
      INNER JOIN COLAB..PATROCINADOR P
      ON PW.ID_PATROCINADOR = P.ID_PATROCINADOR
      WHERE PW.id_widget= @ID_WIDGET
      AND PW.id_categoria = @ID_CATEGORIA
    </selecionarPatrocinadoresCategoriaDoWidgetPatrocinador>
    <inserirWidgetPatrocinador>
      INSERT INTO COLAB..WIDGET_PATROCINADOR (id_widget, tipo_exibicao) VALUES (@ID_WIDGET, @TIPO_EXIBICAO)
    </inserirWidgetPatrocinador>
    <inserirCategoriasPatrocinadorWidget>
      INSERT INTO COLAB..PATROCINADORES_WIDGET (id_widget, id_categoria, id_patrocinador) VALUES (@ID_WIDGET, @ID_CATEGORIA, @ID_PATROCINADOR)
    </inserirCategoriasPatrocinadorWidget>
    <atualizarWidgetPatrocinador>
      UPDATE COLAB..WIDGET_PATROCINADOR SET tipo_exibicao = @TIPO_EXIBICAO WHERE id_widget = @ID_WIDGET
    </atualizarWidgetPatrocinador>
    <excluirWidgetPatrocinador>
      DELETE FROM COLAB..WIDGET_PATROCINADOR WHERE id_widget = @ID_WIDGET
    </excluirWidgetPatrocinador>
    <excluirCategoriasPatrocinadorWidget>
      DELETE FROM COLAB..PATROCINADORES_WIDGET WHERE id_widget = @ID_WIDGET
    </excluirCategoriasPatrocinadorWidget>
  
</WidgetPatrocinador>

  <WidgetPublicidade>
    <selecionarWidgetsPublicidadeDaPagina>
      SELECT DISTINCT
      WPL.ID_WIDGET,
      WP.ID_PAGINA,
      WP.ID_ORDEM,
      WP.ID_AREA_TEMPLATE
      FROM
      COLAB..WIDGET_PUBLICIDADE WPL
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WPL.ID_WIDGET = WP.ID_WIDGET
      WHERE
      WP.ID_PAGINA = @ID_PAGINA
      ORDER BY
      WP.ID_AREA_TEMPLATE, WP.ID_ORDEM
    </selecionarWidgetsPublicidadeDaPagina>
    <selecionarPublicidadesDoWidget>
      SELECT WP.id_publicidade, P.nome, P.tamanho, P.titulo_pt_br, P.descricao_pt_br, P.titulo_en_us, P.descricao_en_us
      FROM COLAB..WIDGET_PUBLICIDADE WP
      INNER JOIN COLAB..PUBLICIDADE P
      ON P.ID_PUBLICIDADE = WP.ID_PUBLICIDADE
      WHERE WP.id_widget = @ID_WIDGET
      ORDER BY WP.ordem ASC
    </selecionarPublicidadesDoWidget>
    <inserirWidgetPublicidade>
      INSERT INTO COLAB..WIDGET_PUBLICIDADE (id_widget, id_publicidade, ordem) VALUES (@ID_WIDGET, @ID_PUBLICIDADE, @ORDEM)
    </inserirWidgetPublicidade>
    <excluirWidgetPublicidade>
      DELETE FROM COLAB..WIDGET_PUBLICIDADE WHERE id_widget = @ID_WIDGET
    </excluirWidgetPublicidade>
  </WidgetPublicidade>

  <WidgetLinks>
    <selecionarWidgetsLinksDaPagina>
      SELECT DISTINCT
      WL.id_widget,
      WL.titulo,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_LINKS WL
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WL.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsLinksDaPagina>
    <selecionarPaginasDoWidgetLinks>
      SELECT WLP.id_imagem_destaque, WLP.descricao, WLP.link_1, WLP.id_noticia_1, WLP.texto_link_1, WLP.link_2, WLP.id_noticia_2, WLP.texto_link_2
      FROM COLAB..WIDGET_LINKS_PAGINA WLP
      WHERE WLP.id_widget = @ID_WIDGET
      ORDER BY WLP.ordem ASC
    </selecionarPaginasDoWidgetLinks>
    <inserirWidgetLinks>
      INSERT INTO COLAB..WIDGET_LINKS (id_widget, titulo) VALUES (@ID_WIDGET, @TITULO)
    </inserirWidgetLinks>
    <atualizarWidgetLinks>
      UPDATE COLAB..WIDGET_LINKS SET titulo = @TITULO WHERE id_widget = @ID_WIDGET
    </atualizarWidgetLinks>
    <excluirWidgetLinks>
      DELETE FROM COLAB..WIDGET_LINKS WHERE id_widget = @ID_WIDGET
    </excluirWidgetLinks>
    <inserirPaginasDoWidgetLinks>
      INSERT INTO COLAB..WIDGET_LINKS_PAGINA (id_widget, id_imagem_destaque, descricao, link_1, id_noticia_1, texto_link_1, link_2, id_noticia_2, texto_link_2, ordem) VALUES (@ID_WIDGET, @ID_IMAGEM_DESTAQUE, @DESCRICAO, @LINK_1, @ID_NOTICIA_1, @LABEL_LINK_1, @LINK_2, @ID_NOTICIA_2, @LABEL_LINK_2, @ORDEM)
    </inserirPaginasDoWidgetLinks>
    <excluirPaginasDoWidgetLinks>
      DELETE FROM COLAB..WIDGET_LINKS_PAGINA WHERE id_widget = @ID_WIDGET
    </excluirPaginasDoWidgetLinks>
  </WidgetLinks>

  <WidgetLinksCombo>
    <selecionarWidgetsLinksComboDaPagina>
      SELECT DISTINCT
      WLC.id_widget,
      WLC.titulo,
      WLC.id_imagem_destaque,
      WLC.descricao,
      I.nome,
      WLC.texto_combo,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_LINKS_COMBO WLC
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WLC.id_widget = WP.id_widget
      INNER JOIN COLAB..IMAGEM I
      ON I.id_imagem = WLC.id_imagem_destaque
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsLinksComboDaPagina>
    <selecionarLinksDoWidgetLinksCombo>
      SELECT WCL.id_pagina, WCL.link, WCL.label_link
      FROM COLAB..WIDGET_COMBO_LINKS WCL
      WHERE WCL.id_widget = @ID_WIDGET
      ORDER BY WCL.ordem ASC
    </selecionarLinksDoWidgetLinksCombo>
    <inserirWidgetLinksCombo>
      INSERT INTO COLAB..WIDGET_LINKS_COMBO (id_widget, titulo, id_imagem_destaque, descricao, texto_combo) VALUES (@ID_WIDGET, @TITULO, @ID_IMAGEM_DESTAQUE, @DESCRICAO, @TEXTO_COMBO)
    </inserirWidgetLinksCombo>
    <atualizarWidgetLinksCombo>
      UPDATE COLAB..WIDGET_LINKS_COMBO SET titulo = @TITULO, id_imagem_destaque = @ID_IMAGEM_DESTAQUE, descricao  = @DESCRICAO, texto_combo = @TEXTO_COMBO WHERE id_widget = @ID_WIDGET
    </atualizarWidgetLinksCombo>
    <excluirWidgetLinksCombo>
      DELETE FROM COLAB..WIDGET_LINKS_COMBO WHERE id_widget = @ID_WIDGET
    </excluirWidgetLinksCombo>
    <inserirLinksDoWidgetLinksCombo>
      INSERT INTO COLAB..WIDGET_COMBO_LINKS (id_widget, id_pagina, link, label_link, ordem) VALUES (@ID_WIDGET, @ID_PAGINA, @LINK, @LABEL_LINK, @ORDEM)
    </inserirLinksDoWidgetLinksCombo>
    <excluirLinksDoWidgetLinksCombo>
      DELETE FROM COLAB..WIDGET_COMBO_LINKS WHERE id_widget = @ID_WIDGET
    </excluirLinksDoWidgetLinksCombo>
  </WidgetLinksCombo>

  <Modalidade>
    <selecionarModalidadePorCodigo>
      SELECT
      MS.id_modalidade,
      MS.nm_modalidade,
      E.id_esporte,
      E.nm_esporte,
      M.nome_exibicao_pt_br,
      M.nome_exibicao_en_us,
      M.descricao_pt_br,
      M.descricao_en_us,
      M.ativo,
      P.id_Participante,
      P.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica
      FROM
      COLAB..Modalidade M
      INNER JOIN SIGEF..Modalidade MS ON MS.id_Modalidade = M.id_modalidade_fge
      INNER JOIN SIGEF..Esporte E ON E.id_Esporte = MS.id_Esporte
      LEFT JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON PPJ.id_Participante = E.id_Participante_Pessoa_Juridica
      LEFT JOIN SIGEF..Participante P ON P.id_Participante = PPJ.id_Participante
      WHERE
      (M.id_modalidade_fge = @ID)
    </selecionarModalidadePorCodigo>
    <selecionarModalidadesFiltradas>
      SELECT DISTINCT
      MS.id_modalidade,
      MS.nm_modalidade,
      E.id_esporte,
      E.nm_esporte,
      M.nome_exibicao_pt_br,
      M.nome_exibicao_en_us,
      M.descricao_pt_br,
      M.descricao_en_us,
      M.ativo,
      P.id_Participante,
      P.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica
      FROM
      COLAB..Modalidade M
      LEFT JOIN COLAB..TAG_MODALIDADE TM ON TM.id_modalidade = M.id_modalidade_fge
      LEFT JOIN COLAB..TAG T ON T.id_tag = TM.id_tag AND T.idioma = @IDIOMA_PT_BR
      INNER JOIN SIGEF..Modalidade MS ON MS.id_Modalidade = M.id_modalidade_fge
      INNER JOIN SIGEF..Esporte E ON E.id_Esporte = MS.id_Esporte
      LEFT JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON PPJ.id_Participante = E.id_Participante_Pessoa_Juridica
      LEFT JOIN SIGEF..Participante P ON P.id_Participante = PPJ.id_Participante
      WHERE
      (@FILTRO IS NULL OR M.nome_exibicao_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%' OR MS.nm_modalidade LIKE '%' + @FILTRO + '%' OR E.nm_esporte LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarModalidadesFiltradas>
    <inserirModalidade>
      INSERT INTO COLAB..Modalidade (id_modalidade_fge, nome_exibicao_pt_br, nome_exibicao_en_us, descricao_pt_br, descricao_en_us, ativo)
      VALUES (@ID_MODALIDADE_FGE, @NOME_EXIBICAO_PT_BR, @NOME_EXIBICAO_EN_US, @DESCRICAO_PT_BR, @DESCRICAO_EN_US, 1)
    </inserirModalidade>
    <atualizarModalidade>
      UPDATE
      COLAB..Modalidade
      SET
      nome_exibicao_pt_br = @NOME_EXIBICAO_PT_BR,
      nome_exibicao_en_us = @NOME_EXIBICAO_EN_US,
      descricao_pt_br = @DESCRICAO_PT_BR,
      descricao_en_us = @DESCRICAO_EN_US
      WHERE
      (id_modalidade_fge = @CODIGO)
    </atualizarModalidade>
    <excluirModalidade>
      DELETE FROM COLAB..Modalidade WHERE (id_modalidade_fge = @ID)
    </excluirModalidade>
    <mudarStatusModalidade>
      UPDATE COLAB..Modalidade SET ativo = @STATUS WHERE id_modalidade_fge = @ID
    </mudarStatusModalidade>

    <obterTagsModalidade>
      SELECT
      TM.id_modalidade,
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..TAG_MODALIDADE TM
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TM.ID_TAG
      WHERE
      (TM.id_modalidade = @ID) AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA)
    </obterTagsModalidade>
    <adicionarTagsModalidade>
      INSERT INTO COLAB..TAG_MODALIDADE (id_modalidade, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsModalidade>
    <excluirTagsModalidade>
      DELETE FROM COLAB..TAG_MODALIDADE WHERE (id_modalidade = @ID)
    </excluirTagsModalidade>

    <selecionarModalidadesSIGEF>
      SELECT
      MS.id_modalidade,
      MS.nm_Modalidade,
      E.id_esporte,
      E.nm_Esporte,
      P.id_Participante,
      P.nm_Participante,
      PPJ.ds_Sigla_Participante_Pessoa_Juridica
      FROM
      SIGEF..Modalidade MS
      INNER JOIN SIGEF..Esporte E ON (E.id_esporte = MS.id_esporte) AND (E.fl_Ativo = 1) AND
      NOT(E.nm_Esporte LIKE '%universitário%') AND NOT (E.nm_Esporte LIKE '%escolar%') AND NOT (E.nm_Esporte LIKE '%todos%')
      LEFT JOIN SIGEF..Participante_Pessoa_Juridica PPJ ON PPJ.id_Participante = E.id_Participante_Pessoa_Juridica
      LEFT JOIN SIGEF..Participante P ON P.id_Participante = PPJ.id_Participante
      WHERE
      (@FILTRO IS NULL OR MS.nm_modalidade LIKE '%' + @FILTRO + '%' OR E.nm_esporte LIKE '%' + @FILTRO + '%') AND
      NOT (MS.nm_Modalidade LIKE '%todas%') AND
      (MS.fl_Ativo = 1) AND
      (MS.id_Modalidade NOT IN
      (SELECT M.id_modalidade_fge FROM COLAB..Modalidade M)
      )
      ORDER BY @ORDER_BY
    </selecionarModalidadesSIGEF>

    <selecionarProvasDaModalidade>
      SELECT
      P.id_Prova,
      P.nm_Prova
      FROM
      SIGEF..Prova P
      WHERE
      (P.id_Modalidade = @ID)
      ORDER BY P.nm_Prova ASC
    </selecionarProvasDaModalidade>

    <selecionarPictogramaDaModalidade>
      SELECT
      SGA.id_Arquivo,
      SGA.bn_Arquivo As Binario
      FROM
      SIGEF..Modalidade M
      INNER JOIN SIGEF..Arquivo SA ON SA.id_Arquivo = M.id_Arquivo AND SA.id_Arquivo_Tipo = @ARQUIVO_TIPO_PICTOGRAMA
      INNER JOIN SIGEF_ARQUIVO..Arquivo SGA ON SA.id_Arquivo = SGA.id_Arquivo
      WHERE
      M.id_Modalidade = @ID
    </selecionarPictogramaDaModalidade>
  </Modalidade>

  <WidgetSliderNoticias>
    <selecionarWidgetsSliderNoticiasDaPagina>
      SELECT DISTINCT
      WSN.id_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_SLIDER_NOTICIA WSN
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WSN.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsSliderNoticiasDaPagina>
    <selecionarNoticiasDoWidgetSliderNoticias>
      SELECT WSN.id_noticia, WSN.titulo, WSN.chamada
      FROM COLAB..WIDGET_SLIDER_NOTICIA WSN
      WHERE WSN.id_widget = @ID_WIDGET
      ORDER BY WSN.ordem ASC
    </selecionarNoticiasDoWidgetSliderNoticias>
    <inserirWidgetSliderNoticias>
      INSERT INTO COLAB..WIDGET_SLIDER_NOTICIA (id_widget, id_noticia, titulo, chamada, ordem) VALUES (@ID_WIDGET, @ID_NOTICIA, @TITULO, @CHAMADA, @ORDEM)
    </inserirWidgetSliderNoticias>
    <excluirWidgetSliderNoticias>
      DELETE FROM COLAB..WIDGET_SLIDER_NOTICIA WHERE id_widget = @ID_WIDGET
    </excluirWidgetSliderNoticias>
  </WidgetSliderNoticias>

  <WidgetCOBCultural>
    <selecionarWidgetsCOBCulturalDaPagina>
      SELECT DISTINCT
      WCC.id_widget,
      WCC.qtd_itens_exibir,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_COB_CULTURAL WCC
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WCC.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsCOBCulturalDaPagina>
    <selecionarCategoriasDoWidgetCOBCultural>
      SELECT WCCC.id_categoria_cob_cultural,
      CCC.nome
      FROM COLAB..WIDGET_COB_CULTURAL_CATEGORIAS WCCC
      INNER JOIN COLAB..CATEGORIA_COB_CULTURAL CCC
      ON CCC.id_categoria = WCCC.id_categoria_cob_cultural
      WHERE WCCC.id_widget = @ID_WIDGET
    </selecionarCategoriasDoWidgetCOBCultural>
    <inserirWidgetCOBCultural>
      INSERT INTO COLAB..WIDGET_COB_CULTURAL (id_widget, qtd_itens_exibir) VALUES (@ID_WIDGET, @QTD_ITENS)
    </inserirWidgetCOBCultural>
    <atualizarWidgetCOBCultural>
      UPDATE COLAB..WIDGET_COB_CULTURAL SET qtd_itens_exibir = @QTD_ITENS WHERE id_widget = @ID_WIDGET
    </atualizarWidgetCOBCultural>
    <excluirWidgetCOBCultural>
      DELETE FROM COLAB..WIDGET_COB_CULTURAL WHERE id_widget = @ID_WIDGET
    </excluirWidgetCOBCultural>
    <inserirCategoriasDoWidgetCOBCultural>
      INSERT INTO COLAB..WIDGET_COB_CULTURAL_CATEGORIAS (id_widget, id_categoria_cob_cultural) VALUES (@ID_WIDGET, @ID_CATEGORIA_COB_CULTURAL)
    </inserirCategoriasDoWidgetCOBCultural>
    <excluirCategoriasDoWidgetCOBCultural>
      DELETE FROM COLAB..WIDGET_COB_CULTURAL_CATEGORIAS WHERE id_widget = @ID_WIDGET
    </excluirCategoriasDoWidgetCOBCultural>
  </WidgetCOBCultural>
  <Evento>
    <selecionarEventoPorCodigo>
      SELECT
      E.id_evento,
      E.titulo_pt_br,
      E.titulo_en_us,
      E.descricao_pt_br,
      E.descricao_en_us,
      E.id_pagina,
      E.id_logotipo_evento,
      P.nome As nm_pagina,
      E.ativo,
      ST.id_sigef,
      ST.nm_sigef,
      ST.ds_sigef,
      ST.tipo_evento,
      ST.dt_Inicio,
      ST.dt_Termino,
      ST.id_Cidade,
      ST.nm_Cidade,
      ST.id_Estado,
      ST.nm_Estado,
      ST.cd_Sigla_Estado,
      ST.id_Pais,
      ST.nm_Pais,
      ST.ds_Instalacao
      FROM
      COLAB..Evento E
      LEFT JOIN COLAB..Pagina P ON P.id_pagina = E.id_pagina
      INNER JOIN
      (
      SELECT
      E.id_evento,
      CASE
      WHEN (E.id_evento_fge IS NOT NULL AND E.id_evento_fge != 0) THEN
      E.id_evento_fge
      WHEN (E.id_missao IS NOT NULL AND E.id_missao != 0) THEN
      E.id_missao
      ELSE
      NULL
      END As id_sigef,
      CASE
      WHEN (E.id_evento_fge IS NOT NULL AND E.id_evento_fge != 0) THEN
      1
      WHEN (E.id_missao IS NOT NULL AND E.id_missao != 0) THEN
      2
      ELSE
      NULL
      END As tipo_evento
      FROM
      COLAB..Evento E
      ) SE ON SE.id_evento = E.id_evento
      INNER JOIN
      (
      SELECT
      ES.id_Evento As id_sigef,
      ES.nm_Evento As nm_sigef,
      ES.dt_Inicio As dt_Inicio,
      ES.dt_Termino As dt_Termino,
      ES.ds_Detalhe As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      ES.ds_Instalacao,
      1 As tipo_evento
      FROM
      SIGEF..Evento ES
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = ES.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (ES.id_Evento_Tipo = @EVENTO_TIPO_COMPETICAO)
      UNION
      SELECT
      MS.id_Missao As id_sigef,
      MS.nm_Missao As nm_sigef,
      MS.dt_Inicio_Jogos As dt_Inicio,
      MS.dt_Termino_Jogos As dt_Termino,
      MS.ds_Missao As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      NULL As ds_Instalacao,
      2 As tipo_evento
      FROM
      SIGEF..Missao MS
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = MS.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      ) ST ON ST.id_sigef = SE.id_sigef AND ST.tipo_evento = SE.tipo_evento
      WHERE
      (E.id_evento = @ID)
    </selecionarEventoPorCodigo>
    <selecionarEventosFiltradas>
      SELECT DISTINCT
      E.id_evento,
      E.titulo_pt_br,
      E.titulo_en_us,
      E.descricao_pt_br,
      E.descricao_en_us,
      E.id_pagina,
      E.id_logotipo_evento,
      P.nome As nm_pagina,
      E.ativo,
      ST.id_sigef,
      ST.nm_sigef,
      ST.ds_sigef,
      ST.tipo_evento,
      ST.dt_Inicio,
      ST.dt_Termino,
      ST.id_Cidade,
      ST.nm_Cidade,
      ST.id_Estado,
      ST.nm_Estado,
      ST.cd_Sigla_Estado,
      ST.id_Pais,
      ST.nm_Pais,
      ST.ds_Instalacao
      FROM
      COLAB..Evento E
      LEFT JOIN COLAB..Pagina P ON P.id_pagina = E.id_pagina
      LEFT JOIN COLAB..TAG_EVENTO TE ON TE.id_evento = E.id_evento
      LEFT JOIN COLAB..TAG T ON T.id_tag = TE.id_tag AND T.idioma = @IDIOMA_PT_BR
      INNER JOIN
      (
      SELECT
      E.id_evento,
      CASE
      WHEN (E.id_evento_fge IS NOT NULL AND E.id_evento_fge != 0) THEN
      E.id_evento_fge
      WHEN (E.id_missao IS NOT NULL AND E.id_missao != 0) THEN
      E.id_missao
      ELSE
      NULL
      END As id_sigef,
      CASE
      WHEN (E.id_evento_fge IS NOT NULL AND E.id_evento_fge != 0) THEN
      1
      WHEN (E.id_missao IS NOT NULL AND E.id_missao != 0) THEN
      2
      ELSE
      NULL
      END As tipo_evento
      FROM
      COLAB..Evento E
      ) SE ON SE.id_evento = E.id_evento
      INNER JOIN
      (
      SELECT
      ES.id_Evento As id_sigef,
      ES.nm_Evento As nm_sigef,
      ES.dt_Inicio As dt_Inicio,
      ES.dt_Termino As dt_Termino,
      ES.ds_Detalhe As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      ES.ds_Instalacao,
      1 As tipo_evento
      FROM
      SIGEF..Evento ES
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = ES.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (ES.id_Evento_Tipo = @EVENTO_TIPO_COMPETICAO)
      UNION
      SELECT
      MS.id_Missao As id_sigef,
      MS.nm_Missao As nm_sigef,
      MS.dt_Inicio_Jogos As dt_Inicio,
      MS.dt_Termino_Jogos As dt_Termino,
      MS.ds_Missao As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      NULL As ds_Instalacao,
      2 As tipo_evento
      FROM
      SIGEF..Missao MS
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = MS.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      ) ST ON ST.id_sigef = SE.id_sigef AND ST.tipo_evento = SE.tipo_evento
      WHERE
      (@FILTRO IS NULL OR E.titulo_pt_br LIKE '%' + @FILTRO + '%' OR T.nome LIKE '%' + @FILTRO + '%')
      ORDER BY @ORDER_BY
    </selecionarEventosFiltradas>
    <inserirEvento>
      INSERT INTO COLAB..Evento (id_evento_fge, id_missao, titulo_pt_br, titulo_en_us, descricao_pt_br, descricao_en_us, id_pagina, id_logotipo_evento, ativo)
      VALUES (@ID_EVENTO_FGE, @ID_MISSAO_FGE, @TITULO_PT_BR, @TITULO_EN_US, @DESCRICAO_PT_BR, @DESCRICAO_EN_US, @ID_PAGINA, @ID_LOGOTIPO_EVENTO, 1)
    </inserirEvento>
    <atualizarEvento>
      UPDATE
      COLAB..Evento
      SET
      id_evento_fge = @ID_EVENTO_FGE,
      id_missao = @ID_MISSAO_FGE,
      titulo_pt_br = @TITULO_PT_BR,
      titulo_en_us = @TITULO_EN_US,
      descricao_pt_br = @DESCRICAO_PT_BR,
      descricao_en_us = @DESCRICAO_EN_US,
      id_pagina = @ID_PAGINA,
      id_logotipo_evento = @ID_LOGOTIPO_EVENTO
      WHERE
      (id_evento = @CODIGO)
    </atualizarEvento>
    <excluirEvento>
      DELETE FROM COLAB..Evento WHERE (id_evento = @ID)
    </excluirEvento>
    <mudarStatusEvento>
      UPDATE COLAB..Evento SET ativo = @STATUS WHERE id_evento = @ID
    </mudarStatusEvento>

    <obterTagsEvento>
      SELECT
      TE.id_evento,
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..TAG_EVENTO TE
      INNER JOIN COLAB..TAG T ON T.ID_TAG = TE.ID_TAG
      WHERE
      (TE.id_evento = @ID) AND
      (@IDIOMA IS NULL OR T.idioma = @IDIOMA)
    </obterTagsEvento>
    <adicionarTagsEvento>
      INSERT INTO COLAB..TAG_EVENTO (id_evento, id_tag) VALUES (@ID, @ID_TAG)
    </adicionarTagsEvento>
    <excluirTagsEvento>
      DELETE FROM COLAB..TAG_EVENTO WHERE (id_evento = @ID)
    </excluirTagsEvento>

    <selecionarEventoSIGEFPorCodigo>
      SELECT
      ES.id_Evento As id_sigef,
      ES.nm_Evento As nm_sigef,
      ES.dt_Inicio As dt_Inicio,
      ES.dt_Termino As dt_Termino,
      ES.ds_Detalhe As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      ES.ds_Instalacao,
      1 As tipo_evento
      FROM
      SIGEF..Evento ES
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = ES.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (ES.id_Evento_Tipo = @EVENTO_TIPO_COMPETICAO) AND
      (ES.fl_Ativo = 1) AND
      (ES.id_Evento = @ID_EVENTO_SIGEF)
      UNION
      SELECT
      MS.id_Missao As id_sigef,
      MS.nm_Missao As nm_sigef,
      MS.dt_Inicio_Jogos As dt_Inicio,
      MS.dt_Termino_Jogos As dt_Termino,
      MS.ds_Missao As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      '' As ds_Instalacao,
      2 As tipo_evento
      FROM
      SIGEF..Missao MS
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = MS.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (MS.fl_Ativo = 1) AND
      (MS.id_Missao = @ID_MISSAO_SIGEF)
    </selecionarEventoSIGEFPorCodigo>
    <selecionarEventosSIGEF>
      SELECT
      ES.id_Evento As id_sigef,
      ES.nm_Evento As nm_sigef,
      ES.dt_Inicio As dt_Inicio,
      ES.dt_Termino As dt_Termino,
      ES.ds_Detalhe As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      ES.ds_Instalacao,
      1 As tipo_evento
      FROM
      SIGEF..Evento ES
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = ES.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (@FILTRO IS NULL OR ES.id_Evento LIKE '%' + @FILTRO + '%' OR ES.ds_Detalhe LIKE '%' + @FILTRO + '%') AND
      (ES.id_Evento_Tipo = @EVENTO_TIPO_COMPETICAO) AND
      (ES.fl_Ativo = 1) AND
      (NOT EXISTS (SELECT E.id_evento_fge FROM COLAB..Evento E WHERE E.id_evento_fge = ES.id_Evento))
      UNION
      SELECT
      MS.id_Missao As id_sigef,
      MS.nm_Missao As nm_sigef,
      MS.dt_Inicio_Jogos As dt_Inicio,
      MS.dt_Termino_Jogos As dt_Termino,
      MS.ds_Missao As ds_sigef,
      C.id_Cidade,
      C.nm_Cidade,
      ET.id_Estado,
      ET.nm_Estado,
      ET.cd_Sigla_Estado,
      P.id_Pais,
      P.nm_Pais,
      '' As ds_Instalacao,
      2 As tipo_evento
      FROM
      SIGEF..Missao MS
      LEFT JOIN FGE_CEP..Cidade C ON C.id_Cidade = MS.id_Cidade
      LEFT JOIN FGE_CEP..Estado ET ON ET.id_Estado = C.id_Estado
      LEFT JOIN FGE_CEP..Pais P ON P.id_Pais = ET.id_Pais
      WHERE
      (@FILTRO IS NULL OR MS.nm_Missao LIKE '%' + @FILTRO + '%' OR MS.ds_Missao LIKE '%' + @FILTRO + '%') AND
      (MS.fl_Ativo = 1) AND
      (NOT EXISTS (SELECT E.id_missao FROM COLAB..Evento E WHERE E.id_missao = MS.id_missao))
      ORDER BY @ORDER_BY
    </selecionarEventosSIGEF>
  </Evento>

  <WidgetGaleriaDeImagens>
    <selecionarWidgetsGaleriaDeImagensDaPagina>
      SELECT DISTINCT
      WGI.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_GALERIA_IMAGENS WGI
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WGI.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsGaleriaDeImagensDaPagina>
    <selecionarGaleriasDoWidgetGaleriaDeImagens>
      SELECT WGI.id_galeria_imagem as id_galeria,
      G.tipo_galeria,
      G.titulo_pt_br,
      G.descricao_pt_br,
      G.titulo_en_us,
      G.descricao_en_us,
      G.data_galeria,
      G.id_destaque,
      G.ativo,
      (SELECT I.titulo_pt_br FROM COLAB..IMAGEM I WHERE I.id_imagem = G.id_destaque) AS titulo_destaque
      FROM COLAB..WIDGET_GALERIA_IMAGENS WGI
      INNER JOIN COLAB..GALERIA G
      ON WGI.id_galeria_imagem = G.id_galeria
      WHERE WGI.id_widget = @ID_WIDGET
    </selecionarGaleriasDoWidgetGaleriaDeImagens>
    <inserirWidgetGaleriaDeImagens>
      INSERT INTO COLAB..WIDGET_GALERIA_IMAGENS (id_widget, id_galeria_imagem) VALUES (@ID_WIDGET, @ID_GALERIA_IMAGEM)
    </inserirWidgetGaleriaDeImagens>
    <excluirWidgetGaleriaDeImagens>
      DELETE FROM COLAB..WIDGET_GALERIA_IMAGENS WHERE id_widget = @ID_WIDGET
    </excluirWidgetGaleriaDeImagens>
  </WidgetGaleriaDeImagens>

  <WidgetGaleriaDeVideos>
    <selecionarWidgetsGaleriaDeVideosDaPagina>
      SELECT DISTINCT
      WGV.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_GALERIA_VIDEOS WGV
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WGV.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsGaleriaDeVideosDaPagina>
    <selecionarGaleriasDoWidgetGaleriaDeVideos>
      SELECT WGV.id_galeria_video as id_galeria,
      G.tipo_galeria,
      G.titulo_pt_br,
      G.descricao_pt_br,
      G.titulo_en_us,
      G.descricao_en_us,
      G.data_galeria,
      G.id_destaque,
      G.ativo,
      (SELECT V.titulo_pt_br FROM COLAB..VIDEO V WHERE V.id_video = G.id_destaque) AS titulo_destaque
      FROM COLAB..WIDGET_GALERIA_VIDEOS WGV
      INNER JOIN COLAB..GALERIA G
      ON WGV.id_galeria_video = G.id_galeria
      WHERE WGV.id_widget = @ID_WIDGET
    </selecionarGaleriasDoWidgetGaleriaDeVideos>
    <inserirWidgetGaleriaDeVideos>
      INSERT INTO COLAB..WIDGET_GALERIA_VIDEOS (id_widget, id_galeria_video) VALUES (@ID_WIDGET, @ID_GALERIA_VIDEO)
    </inserirWidgetGaleriaDeVideos>
    <excluirWidgetGaleriaDeVideos>
      DELETE FROM COLAB..WIDGET_GALERIA_VIDEOS WHERE id_widget = @ID_WIDGET
    </excluirWidgetGaleriaDeVideos>
  </WidgetGaleriaDeVideos>
  <ImagemRecortada>
    <selecionarImagensRecortadasPorCodigoOriginal>
      SELECT
      IR.id_imagem_recortada,
      IR.id_arquivo,
      IR.id_imagem_original,
      IR.proporcao_recorte,
      IR.nome,
      IR.tamanho,
      IR.extensao,
      IR.posicao_x0,
      IR.posicao_y0,
      IR.posicao_x1,
      IR.posicao_y1
      FROM
      COLAB..IMAGEM_RECORTADA IR
      WHERE
      (IR.id_imagem_original = @ID_IMAGEM_ORIGINAL) AND
      (@PROPORCAO_RECORTE IS NULL OR IR.proporcao_recorte = @PROPORCAO_RECORTE)
    </selecionarImagensRecortadasPorCodigoOriginal>
    <inserirImagemRecortada>
      INSERT INTO COLAB..IMAGEM_RECORTADA (id_arquivo, id_imagem_original, proporcao_recorte, nome, tamanho, extensao,
      posicao_x0, posicao_y0, posicao_x1, posicao_y1)
      VALUES (@ID_ARQUIVO, @ID_IMAGEM_ORIGINAL, @PROPORCAO_RECORTE, @NOME, @TAMANHO, @EXTENSAO, @POSICAO_X0, @POSICAO_Y0, @POSICAO_X1, @POSICAO_Y1)
    </inserirImagemRecortada>
    <atualizarImagemRecortada>
      UPDATE
      COLAB..IMAGEM_RECORTADA
      SET
      id_arquivo = @ID_ARQUIVO,
      tamanho = @TAMANHO,
      posicao_x0 = @POSICAO_X0,
      posicao_y0 = @POSICAO_Y0,
      posicao_x1 = @POSICAO_X1,
      posicao_y1 = @POSICAO_Y1
      WHERE
      (id_imagem_recortada = @CODIGO)
    </atualizarImagemRecortada>
    <excluirImagemRecortada>
      DELETE FROM COLAB..IMAGEM_RECORTADA WHERE (id_imagem_original = @ID)
    </excluirImagemRecortada>

    <selecionarArquivoDaImagemRecortada>
      SELECT
      A.id_Arquivo,
      A.binario As Binario
      FROM
      COLAB..IMAGEM_RECORTADA IR
      INNER JOIN COLAB..Arquivo A ON A.id_Arquivo = IR.id_Arquivo
      WHERE
      (IR.id_imagem_original = @ID_IMAGEM_ORIGINAL) AND
      (IR.proporcao_recorte = @PROPORCAO_RECORTE)
    </selecionarArquivoDaImagemRecortada>
  </ImagemRecortada>

  <WidgetConteudo>
    <selecionarWidgetsConteudoPagina>
      SELECT DISTINCT
      WC.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template,
      WC.id_imagem_destaque,
      WC.titulo,
      WC.subtitulo,
      WC.conteudo,
      WC.exibir_imagem_destaque
      FROM
      COLAB..WIDGET_CONTEUDO WC
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WC.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsConteudoPagina>
    <selecionarTagsWidgetConteudo>
      SELECT TWC.id_tag,
      T.nome,
      T.idioma
      FROM COLAB..TAG_WIDGET_CONTEUDO TWC
      INNER JOIN COLAB..TAG T
      ON TWC.ID_TAG = T.ID_TAG
      WHERE TWC.id_widget = @ID_WIDGET
    </selecionarTagsWidgetConteudo>
    <inserirWidgetConteudo>
      INSERT INTO COLAB..WIDGET_CONTEUDO (id_widget, id_imagem_destaque, titulo, subtitulo, conteudo, exibir_imagem_destaque) VALUES (@ID_WIDGET, @ID_IMAGEM_DESTAQUE, @TITULO, @SUBTITULO, @CONTEUDO, @EXIBIR_IMAGEM_DESTAQUE)
    </inserirWidgetConteudo>
    <atualizarWidgetConteudo>
      UPDATE COLAB..WIDGET_CONTEUDO SET id_imagem_destaque = @ID_IMAGEM_DESTAQUE, titulo = @TITULO, subtitulo = @SUBTITULO, conteudo = @CONTEUDO, exibir_imagem_destaque = @EXIBIR_IMAGEM_DESTAQUE WHERE id_widget = @ID_WIDGET
    </atualizarWidgetConteudo>
    <excluirWidgetConteudo>
      DELETE FROM COLAB..WIDGET_CONTEUDO WHERE id_widget = @ID_WIDGET
    </excluirWidgetConteudo>
    <inserirTagsWidgetConteudo>
      INSERT INTO COLAB..TAG_WIDGET_CONTEUDO (id_widget, id_tag) VALUES (@ID_WIDGET, @ID_TAG)
    </inserirTagsWidgetConteudo>
    <excluirTagsWidgetConteudo>
      DELETE FROM COLAB..TAG_WIDGET_CONTEUDO WHERE id_widget = @ID_WIDGET
    </excluirTagsWidgetConteudo>
  </WidgetConteudo>

  <WidgetPerfilAtletas>
    <selecionarWidgetsPerfilAtletasDaPagina>
      SELECT DISTINCT
      WPA.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template,
      WPA.exibe_quadro_medalhas,
      WPA.exibe_link_perfil_completo,
      WPA.exibe_links_redes_sociais,
      WPA.id_evento,
      E.titulo_pt_br As nm_evento
      FROM
      COLAB..WIDGET_PERFIL_ATLETA WPA
      INNER JOIN COLAB..WIDGET_PAGINA WP ON WPA.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W ON W.id_widget = WP.id_widget
      LEFT JOIN COLAB..EVENTO E ON E.id_evento = WPA.id_evento
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsPerfilAtletasDaPagina>
    <selecionarModalidadesDoWidgetPerfilAtletas>
      SELECT
      M.id_modalidade_fge,
      M.nome_exibicao_pt_br
      FROM
      COLAB..WIDGET_PERFIL_ATLETA_MODALIDADES WPAM
      INNER JOIN COLAB..Modalidade M ON WPAM.id_modalidade = M.id_modalidade_fge
      WHERE
      WPAM.id_widget = @ID_WIDGET
    </selecionarModalidadesDoWidgetPerfilAtletas>
    <inserirWidgetPerfilAtletas>
      INSERT INTO COLAB..WIDGET_PERFIL_ATLETA (id_widget, exibe_quadro_medalhas, exibe_link_perfil_completo, exibe_links_redes_sociais, id_evento)
      VALUES (@ID_WIDGET, @EXIBE_QUADRO_MEDALHAS, @EXIBE_LINK_PERFIL_COMPLETO, @EXIBE_LINKS_REDES_SOCIAIS, @ID_EVENTO)
    </inserirWidgetPerfilAtletas>
    <excluirWidgetPerfilAtletas>
      DELETE FROM COLAB..WIDGET_PERFIL_ATLETA WHERE id_widget = @ID_WIDGET
    </excluirWidgetPerfilAtletas>
    <inserirModalidadesDoWidgetPerfilAtletas>
      INSERT INTO COLAB..WIDGET_PERFIL_ATLETA_MODALIDADES (id_widget, id_modalidade)
      VALUES (@ID_WIDGET, @ID_MODALIDADE)
    </inserirModalidadesDoWidgetPerfilAtletas>
    <excluirModalidadesDoWidgetPerfilAtletas>
      DELETE FROM COLAB..WIDGET_PERFIL_ATLETA_MODALIDADES WHERE id_widget = @ID_WIDGET
    </excluirModalidadesDoWidgetPerfilAtletas>
  </WidgetPerfilAtletas>

  <WidgetNoticia>
    <selecionarWidgetsNoticiaDaPagina>
      SELECT DISTINCT
      WN.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template,
      WN.qtd_itens_exibir,
      WN.exibir_todas_editorias,
      WN.exibir_imagem_destaque,
      WN.exibir_links_redes_sociais,
      WN.exibir_data_e_hora,
      WN.exibir_descricao,
      WN.exibir_paginacao
      FROM
      COLAB..WIDGET_NOTICIA WN
      INNER JOIN COLAB..WIDGET_PAGINA WP ON WN.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsNoticiaDaPagina>
    <selecionarTagsDoWidgetNoticia>
      SELECT
      T.id_tag,
      T.nome,
      T.idioma
      FROM
      COLAB..WIDGET_NOTICIA_TAGS_FILTRO WNT
      INNER JOIN COLAB..TAG T ON WNT.id_tag = T.id_tag
      WHERE
      WNT.id_widget = @ID_WIDGET
    </selecionarTagsDoWidgetNoticia>
    <inserirWidgetNoticia>
      INSERT INTO COLAB..WIDGET_NOTICIA (id_widget, qtd_itens_exibir, exibir_todas_editorias, exibir_links_redes_sociais, exibir_imagem_destaque, exibir_data_e_hora, exibir_descricao, exibir_paginacao)
      VALUES (@ID_WIDGET, @QTD_ITENS_EXIBIR, @EXIBIR_TODAS_EDITORIAS, @EXIBIR_LINKS_REDES_SOCIAIS, @EXIBIR_IMAGEM_DESTAQUE, @EXIBIR_DATA_E_HORA, @EXIBIR_DESCRICAO, @EXIBIR_PAGINACAO)
    </inserirWidgetNoticia>
    <excluirWidgetNoticia>
      DELETE FROM COLAB..WIDGET_NOTICIA WHERE id_widget = @ID_WIDGET
    </excluirWidgetNoticia>
    <inserirTagsDoWidgetNoticia>
      INSERT INTO COLAB..WIDGET_NOTICIA_TAGS_FILTRO (id_widget, id_tag)
      VALUES (@ID_WIDGET, @ID_TAG)
    </inserirTagsDoWidgetNoticia>
    <excluirTagsDoWidgetNoticia>
      DELETE FROM COLAB..WIDGET_NOTICIA_TAGS_FILTRO WHERE id_widget = @ID_WIDGET
    </excluirTagsDoWidgetNoticia>
  </WidgetNoticia>

  <WidgetCalendarioEventos>
    <selecionarWidgetsCalendarioEventosDaPagina>
      SELECT DISTINCT
      W.id_widget,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET W
      INNER JOIN COLAB..WIDGET_PAGINA WP ON W.id_widget = WP.id_widget
      WHERE
      (WP.id_pagina = @ID_PAGINA) AND
      (W.tipo_widget = @TIPO_CALENDARIO_4_COL OR W.tipo_widget = @TIPO_CALENDARIO_8_COL)
    </selecionarWidgetsCalendarioEventosDaPagina>
    <selecionarModalidadesDoWidgetCalendarioEventos>
      SELECT
      M.id_modalidade_fge,
      M.nome_exibicao_pt_br
      FROM
      COLAB..WIDGET_CALENDARIO_EVENTOS_MODALIDADES WCEM
      INNER JOIN COLAB..Modalidade M ON WCEM.id_modalidade = M.id_modalidade_fge
      WHERE
      (WCEM.id_widget = @ID_WIDGET)
    </selecionarModalidadesDoWidgetCalendarioEventos>
    <inserirModalidadesDoWidgetCalendarioEventos>
      INSERT INTO COLAB..WIDGET_CALENDARIO_EVENTOS_MODALIDADES (id_widget, id_modalidade) VALUES (@ID_WIDGET, @ID_MODALIDADE)
    </inserirModalidadesDoWidgetCalendarioEventos>
    <excluirModalidadesDoWidgetCalendarioEventos>
      DELETE FROM COLAB..WIDGET_CALENDARIO_EVENTOS_MODALIDADES WHERE id_widget = @ID_WIDGET
    </excluirModalidadesDoWidgetCalendarioEventos>
  </WidgetCalendarioEventos>

  <WidgetPreConfigurado>
    <selecionarWidgetPreConfiguradoPorCodigo>
      SELECT
        WPC.id_widget,
        WPC.id_widget_origem,
        WPC.idioma,
        W.nome,
        WO.tipo_widget
      FROM
        COLAB..WIDGET_PRE_CONFIGURADO WPC
        LEFT JOIN COLAB..WIDGET W ON W.id_widget = WPC.id_widget
        LEFT JOIN COLAB..WIDGET WO ON WO.id_widget = WPC.id_widget_origem
      WHERE
        WPC.id_widget = @ID
    </selecionarWidgetPreConfiguradoPorCodigo>
    <selecionarWidgetsPreConfigurados>
      SELECT
        WPC.id_widget,
        WPC.id_widget_origem,
        WPC.idioma,
        W.nome,
        WO.tipo_widget
      FROM
        COLAB..WIDGET_PRE_CONFIGURADO WPC
        LEFT JOIN COLAB..WIDGET W ON W.id_widget = WPC.id_widget
        LEFT JOIN COLAB..WIDGET WO ON WO.id_widget = WPC.id_widget_origem
      WHERE
        (@FILTRO IS NULL OR W.nome LIKE '%' + @FILTRO + '%') AND
        (@NOME IS NULL OR W.nome LIKE @NOME)
      ORDER BY @ORDER_BY
    </selecionarWidgetsPreConfigurados>
    <inserirWidgetPreConfigurado>
      INSERT INTO COLAB..WIDGET_PRE_CONFIGURADO (id_widget, id_widget_origem, idioma) VALUES (@ID_WIDGET, @ID_WIDGET_ORIGEM, @IDIOMA)
    </inserirWidgetPreConfigurado>
    <excluirWidgetPreConfigurado>
      DELETE FROM COLAB..WIDGET_PRE_CONFIGURADO WHERE id_widget = @ID_WIDGET
    </excluirWidgetPreConfigurado>
  </WidgetPreConfigurado>

  <WidgetLinhaDoTempo>
    <selecionarWidgetsLinhaDoTempo>
      SELECT DISTINCT
      WLT.id_widget,
      WLT.tipo_divisao,
      WLT.qtd_segmentos,
      WLT.unidade_tempo,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_LINHA_TEMPO WLT
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WLT.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WLT.id_widget = @CODIGO_WIDGET
    </selecionarWidgetsLinhaDoTempo>
    <selecionarWidgetsLinhaDoTempoDaPagina>
      SELECT DISTINCT
      WLT.id_widget,
      WLT.tipo_divisao,
      WLT.qtd_segmentos,
      WLT.unidade_tempo,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_LINHA_TEMPO WLT
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WLT.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsLinhaDoTempoDaPagina>
    <selecionarAcontecimentosDoWidgetLinhaDoTempo>
      SELECT WLTA.id_noticia,
      N.titulo AS titulo_noticia,
      WLTA.data_inicial,
      WLTA.data_final,
      WLTA.titulo,
      WLTA.descricao
      FROM COLAB..WIDGET_LINHA_TEMPO_ACONTECIMENTOS WLTA
      LEFT JOIN COLAB..NOTICIA N
      ON WLTA.id_noticia = N.id_noticia
      WHERE WLTA.id_widget = @ID_WIDGET
      ORDER BY WLTA.data_inicial ASC
    </selecionarAcontecimentosDoWidgetLinhaDoTempo>
    <inserirWidgetLinhaDoTempo>
      INSERT INTO COLAB..WIDGET_LINHA_TEMPO (id_widget, tipo_divisao, qtd_segmentos, unidade_tempo) VALUES (@ID_WIDGET, @TIPO_DIVISAO, @QTD_SEGMENTOS, @UNIDADE_TEMPO)
    </inserirWidgetLinhaDoTempo>
    <atualizarWidgetLinhaDoTempo>
      UPDATE COLAB..WIDGET_LINHA_TEMPO SET tipo_divisao = @TIPO_DIVISAO, qtd_segmentos = @QTD_SEGMENTOS, unidade_tempo = @UNIDADE_TEMPO WHERE id_widget = @ID_WIDGET
    </atualizarWidgetLinhaDoTempo>
    <excluirWidgetLinhaDoTempo>
      DELETE FROM COLAB..WIDGET_LINHA_TEMPO WHERE id_widget = @ID_WIDGET
    </excluirWidgetLinhaDoTempo>
    <inserirAcontecimentosDoWidgetLinhaDoTempo>
      INSERT INTO COLAB..WIDGET_LINHA_TEMPO_ACONTECIMENTOS (id_widget, id_noticia, data_inicial, data_final, titulo, descricao) VALUES (@ID_WIDGET, @ID_NOTICIA, @DATA_INICIAL, @DATA_FINAL, @TITULO, @DESCRICAO)
    </inserirAcontecimentosDoWidgetLinhaDoTempo>
    <excluirAcontecimentosDoWidgetLinhaDoTempo>
      DELETE FROM COLAB..WIDGET_LINHA_TEMPO_ACONTECIMENTOS WHERE id_widget = @ID_WIDGET
    </excluirAcontecimentosDoWidgetLinhaDoTempo>
  </WidgetLinhaDoTempo>
  <WidgetContagemRegressiva>
    <selecionarWidgetsContagemRegressiva>
      SELECT DISTINCT
      WCR.id_widget,
      WCR.id_evento_1,
      WCR.id_evento_2,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_CONTAGEM_REGRESSIVA WCR
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WCR.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WCR.id_widget = @CODIGO_WIDGET
    </selecionarWidgetsContagemRegressiva>
    <selecionarWidgetsContagemRegressivaDaPagina>
      SELECT DISTINCT
      WCR.id_widget,
      WCR.id_evento_1,
      WCR.id_evento_2,
      W.tipo_widget,
      WP.id_pagina,
      WP.id_ordem,
      WP.id_area_template
      FROM
      COLAB..WIDGET_CONTAGEM_REGRESSIVA WCR
      INNER JOIN COLAB..WIDGET_PAGINA WP
      ON WCR.id_widget = WP.id_widget
      INNER JOIN COLAB..WIDGET W
      ON W.id_widget = WP.id_widget
      WHERE
      WP.id_pagina = @ID_PAGINA
    </selecionarWidgetsContagemRegressivaDaPagina>
    <inserirWidgetContagemRegressiva>
      INSERT INTO COLAB..WIDGET_CONTAGEM_REGRESSIVA (id_widget, id_evento_1, id_evento_2) VALUES (@ID_WIDGET, @ID_EVENTO_1, @ID_EVENTO_2)
    </inserirWidgetContagemRegressiva>
    <atualizarWidgetContagemRegressiva>
      UPDATE COLAB..WIDGET_CONTAGEM_REGRESSIVA SET id_evento_1 = @ID_EVENTO_1, id_evento_2 = @ID_EVENTO_2 WHERE id_widget = @ID_WIDGET
    </atualizarWidgetContagemRegressiva>
    <excluirWidgetContagemRegressiva>
      DELETE FROM COLAB..WIDGET_CONTAGEM_REGRESSIVA WHERE id_widget = @ID_WIDGET
    </excluirWidgetContagemRegressiva>
  </WidgetContagemRegressiva>
</Queries>